
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>「３三将棋」アプリリリースしました</title>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1752720-7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      gtag('config', 'UA-1752720-7');
    </script>
    <meta name="author" content="happyclam">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <script src="/assets/themes/twitter/js/excanvas.min.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/themes/twitter/bootstrap/css/bootstrap.2.2.2.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link rel="shortcut icon" href="/images/favicon.ico">
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images

    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@SappierBoy">
  <meta name="twitter:creator" content="@SappierBoy">
  
  <meta name="twitter:title" content="「３三将棋」アプリリリースしました">
  
  
  <meta name="twitter:url" content="https://happyclam.github.io/project/2018-01-01/33shogiapp">
  
  
  <meta name="twitter:description" content="初心者ほど簡単と思い込んで負ける。ベテランでも初見で全パターン勝てる人はいないでしょう">
  
  
  <meta name="twitter:image:src" content="https://happyclam.github.io/images/33shogi_logo.png">
  

  <link rel="canonical" href="https://happyclam.github.io/project/2018-01-01/33shogiapp" />
    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script language="JavaScript">
$(document).ready( function () {
    $("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
})
</script>
<script src="/assets/themes/twitter/js/jquery.min.js"></script>
<script src="/assets/themes/twitter/js/jquery.flot.min.js"></script>
<script src="/assets/themes/twitter/js/flotr2.min.js" type="text/javascript"></script>
<script src="/assets/themes/twitter/js/jquery.flot.selection.js" type="text/javascript" ></script>
<script src="/assets/themes/twitter/js/jekyll-search.js" type="text/javascript"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-1752720-7', 'happyclam.github.io');
      ga('send', 'pageview');
    </script>
<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
  </head>

  <body>
    <div style="text-align: center;">
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-9018029357773039",
        enable_page_level_ads: true
        });
      </script>
    </div>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">自己満足プログラミング</a>
          <ul class="nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages">Pages</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/profile">About</a></li>
      	
      
    
  
    
      
    
  
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">Tags</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">
      <div class="row-fluid">
        <div class="span3">
        <a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="SappierBoy">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>
        <div class="span9"
             <!-- Html Elements for Search -->
             <div id="search-container" align="right">
               <input type="text" id="search-input" placeholder="search...">
               <ul id="results-container"></ul>
             </div>
             <div class="results"></div>
        </div>
      </div>
<script type="text/javascript">
  SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{category}:{title}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 15,
    fuzzy: false,
  })
</script>
      <div class="content">
        
<div class="page-header">
  <h1>「３三将棋」アプリリリースしました </h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>01 January 2018</span>
    </div>
    <div class="content">
      <p><a href="https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam"><img src="/images/ja_badge_web_generic.png" alt="３三将棋" title="３三将棋" width="155" height="60" /></a></p>

<h3 id="３三将棋について">「３三将棋」について</h3>
<p>　以前にも<a href="/programming/2016-07-23/33shogi">「３三将棋」に関する記事</a>を書きましたが、実際に作ってみました。最初はゲーム開始時の初期盤面をユーザーが自由に編集出来るようなものにしようと考えていたのですが、そこまで開発コストをかけても実際に自分で初期盤面を試行錯誤しながら作って遊んでみようと思うユーザーがそれほどいるとは思えなかったので、とりあえず１５パターンの初期盤面を用意しました。今後パターンを増やしていくつもりです。</p>

<h3 id="ルール">ルール</h3>
<ul>
  <li>駒の動きは将棋と同じです。</li>
  <li>打ち歩詰め、二歩は禁止です。</li>
  <li>先手は一段目、後手は三段目に駒を移動すると成ることができます。</li>
  <li>同一局面（手番も同じ）が４回現れると千日手でゲーム終了としています。</li>
  <li>行き場の無い駒は打てません（桂馬を二段目に打ったり、先手が歩を一段目に打ったり）</li>
  <li>王手放置は出来ません（王の自殺手も不可）</li>
</ul>

<h3 id="対局画面">対局画面</h3>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_battle.png" alt="対戦画面" title="対戦画面" /></p>
</div>
<p><span>ＡＩ同士の対戦の時だけ局面の評価値を表示するようにしています。左上の数値は手数です。</span></p>

<h3 id="閲覧画面">閲覧画面</h3>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_view.png" alt="閲覧画面" title="閲覧画面" /></p>
</div>
<p><span>対局が終了するか、対局を中断すると閲覧画面に切り替わって、初手からの手順を確認することが出来ます。</span>
<span>Version0.9.9.0から中断後レベルや対局者を変更して再開することが出来ます</span></p>

<h3 id="メニュー">メニュー</h3>
<ul>
  <li>先手・後手</li>
</ul>

<p><span>Version1.0.1.8からＡＩ同士の対戦時も詰みまで指すように変更しました。</span><br />
<span>Version0.9.9.0から、中断後にゲームを再開する機能をつけました。</span></p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_player.png" alt="Menu - 先手・後手" title="Menu - 先手・後手" /></p>
</div>

<ul>
  <li>ＡＩレベル</li>
</ul>

<p><span>駒に重みを設定してその合計値で局面を評価する評価関数を使い先読みを行う、よくある思考ルーチン（MIN-MAX法＋αβ法による全件探索）です。JavaScript製ということもあり、<del>非常に遅いのであまり深く読めません。</del>今後、候補手を事前に絞るなどして速度アップをしていく予定です。</span></p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_ailevel.png" alt="Menu - ＡＩレベル" title="Menu - ＡＩレベル" /></p>
</div>

<p>長考モード：<br />
　Version0.9.3.0から長考モードが使えます。長考モードは４手読みで候補手を上位５手までに絞って、その５手に関して９手読みをするという仕様になっています。思考時間はリリース当初から改善していますが、古い機種では遅くて使用に堪えないかもしれません。</p>

<table>
  <thead>
    <tr>
      <th>Version</th>
      <th>ＡＩレベル（普通）</th>
      <th>ＡＩレベル（長考）</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0.9.1.2</td>
      <td><img src="/images/v0912-ordinal.gif" alt="Version0.9.1.2レベル普通" title="Version0.9.1.2 ＡＩレベル（普通）" /> 経過時間：30532ミリ秒</td>
      <td><img src="/images/v0912-tyokoh.gif" alt="Version0.9.1.2レベル長考" title="Version0.9.1.2 ＡＩレベル（長考）" /> 経過時間：153052ミリ秒</td>
    </tr>
    <tr>
      <td>0.9.4.6</td>
      <td><img src="/images/v0946-ordinal.gif" alt="Version0.9.4.6レベル普通" title="Version0.9.4.6 ＡＩレベル（普通）" /> 経過時間：29258ミリ秒</td>
      <td><img src="/images/v0946-tyokoh.gif" alt="Version0.9.4.6レベル長考" title="Version0.9.4.6 ＡＩレベル（長考）" /> 経過時間：87109ミリ秒</td>
    </tr>
    <tr>
      <td>0.9.8.0</td>
      <td><img src="/images/v0980-ordinal.gif" alt="Version0.9.8.0レベル普通" title="Version0.9.8.0 ＡＩレベル（普通）" /> 経過時間：25838ミリ秒</td>
      <td><img src="/images/v0980-tyokoh.gif" alt="Version0.9.8.0レベル長考" title="Version0.9.8.0 ＡＩレベル（長考）" /> 経過時間：51774ミリ秒</td>
    </tr>
    <tr>
      <td>1.0.0.8</td>
      <td><img src="/images/v1008ordinal.gif" alt="Version1.0.0.8レベル普通" title="Version1.0.0.8 ＡＩレベル（普通）" /> 経過時間：25732ミリ秒</td>
      <td><img src="/images/v1008tyokoh.gif" alt="Version1.0.0.8レベル長考" title="Version1.0.0.8 ＡＩレベル（長考）" /> 経過時間：49646ミリ秒</td>
    </tr>
  </tbody>
</table>

<p>・長考モードにランダム選択を導入（Version0.9.7.0）:<br />
　長考モードは最初に４手読みをした結果から候補手を５手に絞っているので、その候補手を絞る段階で最善手が候補手から漏れてしまうこともあります。特に４手読みの結果上位５位、６位、７位の３手の評価値が全く同じであっても常に６位、７位の手は捨てられるのがもったいないので、評価値が同じだった場合はランダムに指し手を選ぶようにしました。あくまでも４手読み時の評価値が同じだった場合だけなので、指し手に大きな変化はありませんが長考モードに関しては常に同じ手を指すとは限らなくなりました。</p>

<p>・パフォーマンス大幅改善（Version0.9.8.0）:<br />
　前回のチューニング（Version0.9.4.6）はプログラムコードを速度重視のものに置き換える方法、今回のチューニング（Version0.9.8.0）は局面の枝刈りの無駄を省くアルゴリズムの修正によるものです<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>。</p>

<p>・三手以内の詰み<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>は逃さないように変更（Version1.0.0.0）:<br />
　「弱い」モードの時も含めて全てのモードで三手以内の詰みは逃さないようにしました。勝ちを読みきった後でも無駄に手数を伸ばすことがあったので、全てのモードで三手以内の詰みがあるときは常にその手順を選択するように変更しました。<br />
　今までから「瞑想」モードでは五手以内の詰みを逃さないようになっていますが、最初に候補手を絞る段階で好手を逃す可能性があるため、五手詰め以上に関しては絶対逃さないとは言い切れません。</p>

<p>瞑想モード:<br />
　Version0.9.9.0から瞑想モード追加しました。長考モードより一手深く読みます。</p>

<hr />

<p>駒の重み：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">駒の種類 \ 重み</th>
      <th style="text-align: right">　表（不成）　　</th>
      <th style="text-align: right">　裏（成り駒）　</th>
      <th style="text-align: right">持ち駒</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">玉（王）</td>
      <td style="text-align: right">9999</td>
      <td style="text-align: right">(9999)</td>
      <td style="text-align: right">(9999)</td>
    </tr>
    <tr>
      <td style="text-align: left">飛　</td>
      <td style="text-align: right">85</td>
      <td style="text-align: right">110</td>
      <td style="text-align: right">75</td>
    </tr>
    <tr>
      <td style="text-align: left">角　</td>
      <td style="text-align: right">75</td>
      <td style="text-align: right">100</td>
      <td style="text-align: right">65</td>
    </tr>
    <tr>
      <td style="text-align: left">金　</td>
      <td style="text-align: right">50</td>
      <td style="text-align: right">(50)</td>
      <td style="text-align: right">45</td>
    </tr>
    <tr>
      <td style="text-align: left">銀　</td>
      <td style="text-align: right">45</td>
      <td style="text-align: right">50</td>
      <td style="text-align: right">40</td>
    </tr>
    <tr>
      <td style="text-align: left">桂　</td>
      <td style="text-align: right">30</td>
      <td style="text-align: right">50</td>
      <td style="text-align: right">25</td>
    </tr>
    <tr>
      <td style="text-align: left">香　</td>
      <td style="text-align: right">25</td>
      <td style="text-align: right">50</td>
      <td style="text-align: right">20</td>
    </tr>
    <tr>
      <td style="text-align: left">歩　</td>
      <td style="text-align: right">10</td>
      <td style="text-align: right">50</td>
      <td style="text-align: right">7</td>
    </tr>
  </tbody>
</table>

<p><span>※対局中に大駒が成れるのに成らないケースがしばしば見られると思いますが、上記表の重みを考慮して、どうせ相手に取られるから成らない（低い重みのまま）でおこうとＡＩが判断するためです。</span></p>

<ul>
  <li>初期配置</li>
</ul>

<p><span>作ってみて感じたのですが、３三将棋の場合適当に駒を配置すると将棋の上級者が見るとすぐに勝敗が明白な局面になっていたりして、面白い勝負になりそうな初期配置を探すのが一番難しいかもしれません。とりあえず勝負が楽しめそうな配置で尚且ついろんな種類の駒を使うことを考えて「９マス将棋」なども参考にしながら１５種類の局面を用意しました。今後、追加していく予定です。</span></p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_placement.png" alt="Menu - 初期配置" title="Menu - 初期配置" /></p>
</div>

<ul>
  <li>初期配置検索機能</li>
</ul>

<p>　初期配置パターンが１００を超えてきたので、Version1.0.2.6から初期配置検索機能を付けました。</p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_search1.png" alt="Menu - 初期配置検索" title="Menu - 初期配置検索" /></p>
</div>

<p>　駒を選択して検索ボタンを押下すると、持ち駒あるいは盤上にその駒を使用している初期配置がリストアップされます<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>。駒の選択条件はアンド（＆）検索になっているので、例えば「角」と「香」を選んで検索すると「角」も「香」も使用されている初期配置だけが検索結果に表示されます。</p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_search2.png" alt="Menu - 初期配置検索結果" title="Menu - 初期配置検索結果" /></p>
</div>

<ul>
  <li>駒の動きガイド<br />
　駒の動ける場所と、棋譜の入出力に使用する「駒の略号」を一覧表にしました。</li>
</ul>

<div>
          <table style="border-collapse:collapse;width: 80%; table-layout: auto; word-break: break-all; wordwrap: break-word" border="1" align="center">
            <thead>
              <tr>
                <th data-i18n="[html]koma_front">表<br />略号</th>
                <th data-i18n="koma_front_moves">動き</th>
                <th data-i18n="koma_back">裏（成駒）</th>
                <th data-i18n="koma_back_moves">動き</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td align="center" data-i18n="[html]koma_gyoku"><img src="/images/ou.png" /><br />OU</td>
                <td>
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">玉</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center">-</td>
                <td align="center">-</td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_hisya"><img src="/images/hi.png" /><br />HI</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜︎</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">ー</td>
                      <td align="center">ー</td>
                      <td align="center">飛</td>
                      <td align="center">ー</td>
                      <td align="center">ー</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center" data-i18n="[html]koma_ryu"><img src="/images/ry.png" /><br />RY</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">｜</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">ー</td>
                      <td align="center">ー</td>
                      <td align="center">竜</td>
                      <td align="center">ー</td>
                      <td align="center">ー</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">|</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">|</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_kaku"><img src="/images/ka.png" /><br />KA</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">＼</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">／</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">＼</td>
                      <td align="center">&emsp;</td>
                      <td align="center">／</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">角</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">／</td>
                      <td align="center">&emsp;</td>
                      <td align="center">＼</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">／</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">＼</td>
                    </tr>
                  </table>
                </td>
                <td align="center" data-i18n="[html]koma_uma"><img src="/images/um.png" /><br />UM</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">＼</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">／</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">＼</td>
                      <td align="center">◯</td>
                      <td align="center">／</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">馬</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">／</td>
                      <td align="center">◯</td>
                      <td align="center">＼</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">／</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">＼</td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_kin"><img src="/images/ki.png" /><br />KI</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">金</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center">-</td>
                <td align="center">-</td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_gin"><img src="/images/gi.png" /><br />GI</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">銀</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center" data-i18n="[html]koma_narigin"><img src="/images/ng.png" /><br />NG</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">全</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_keima"><img src="/images/ke.png" /><br />KE</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;︎</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">桂</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center" data-i18n="[html]koma_narikei"><img src="/images/nk.png" /><br />NK</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">圭</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_kyosya"><img src="/images/ky.png" /><br />KY</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜︎</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">｜</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">香</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center" data-i18n="[html]koma_narikyo"><img src="/images/ny.png" /><br />NY</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">杏</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
              </tr>
              <tr>
                <td align="center" data-i18n="[html]koma_fu"><img src="/images/fu.png" /><br />FU</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">歩</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
                <td align="center" data-i18n="[html]koma_tokin"><img src="/images/to.png" /><br />TO</td>
                <td align="center">
                  <table border="1">
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">と</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">◯</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                    <tr>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                      <td align="center">&emsp;</td>
                    </tr>
                  </table>
                </td>
              </tr>
            </tbody>
          </table>
</div>

<h3 id="多言語対応">多言語対応</h3>
<p>　Version1.0.4.1から多言語対応しました。対応言語は英語、日本語、繁体中国語、スペイン語で、アプリで使用するメッセージが全てAndroidの言語設定で選んだ言語で表示されます。デフォルトは英語です。<br />
　将棋の駒の動かし方を知らない人のために、<del>このページの上部に駒の動きを表示することにしました。</del>アプリ内メニューに駒の動き一覧表を追加しました。</p>

<div id="inout"></div>
<h3 id="クリップボードを使った棋譜の入出力対応">クリップボードを使った棋譜の入出力対応</h3>
<p>　Version1.0.5.0から<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>の棋譜の入出力に対応しました。<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>では棋譜ファイルのヘッダー部分に駒の配置を定義出来るので、好きなように初期配置を定義して読み込ませれば自分が試してみたい初期配置から対戦が可能です。</p>

<ul>
  <li>棋譜出力</li>
</ul>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_output.png" alt="棋譜出力画面" title="棋譜出力画面" /></p>
</div>

<p>　左上のチェックマークアイコンをタップすると共有画面（インテント）が表示されるので、クリップボードを選べばテキストファイルを扱えるアプリに棋譜データを貼り付けて保存出来ます。<br />
　<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式</a>の棋譜はヘッダ部分に駒の初期配置を定義出来る（駒落ち将棋にも対応している）ので、駒の初期配置パターンを選択出来るこのアプリに都合がいいと思ったので採用しました。但し<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式</a>の規約を全て網羅しているわけではなく、必要最小限の部分だけ実装しています。<code>T</code>で始まる指し手の消費時間や<code>$</code>で始まる棋譜情報は出力されません。以下が出力される棋譜の一例です。</p>
<pre><code>' #３三将棋 https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam 
'No. 52
'
V2.2
N+AI
N-AI
P1+OU-KA * 
P2 *  *  * 
P3 * +KA-OU
P+00KE
P-00KE
+
+3121OU
-1323OU
+0011KA
-0013KA
+0033KE
-0031KE
+1122KA
-1322KA
</code></pre>

<ul>
  <li>棋譜入力</li>
</ul>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_input1.png" alt="棋譜入力画面１" title="棋譜入力画面１" /></p>
</div>

<p>　テキストボックスに棋譜テキストデータを貼り付けて読み込みボタンをタップすれば、棋譜を読み込みます。<a href="https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam">このアプリ</a>自身が出力した棋譜データは読めますが、他のソフトから出力された棋譜データや自前で作成した棋譜データは読み込みに失敗するかもしれません。エラーが発生した場合はその行数を表示しますので、データを編集して試してください。<br />
　※カンマ区切りのマルチステートメントには対応していません。<br />
　※たとえ<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>の棋譜であっても本将棋（９×９）の棋譜は読めません、３三将棋専用です。</p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_input2.png" alt="棋譜入力画面２" title="棋譜入力画面２" /></p>
</div>

<p>　棋譜を読み込んだ後は通常の対局通り、対局者を変更したり局面を戻して途中から指し継いだり出来ます。</p>

<h3 id="独自の初期配置から対局開始する例">独自の初期配置から対局開始する例</h3>
<p>　９マス将棋の答えを知りたい、特定の局面を検討したいと思っていた人に役に立つと思います。<br />
　棋譜ファイルは<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>のルールに従ってアルファベット２文字からなる駒の略号を使って記述します。<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>の規約を網羅しているわけではないので、必要最小限のデータの例は以下のようになります。</p>

<pre><code class="language-Text">P1 *  * -OU
P2 *  *  *
P3+OU *  *
P+00KA00FU
P-00GI00GI
+
</code></pre>

<p>　<code>P</code>に続く<strong>盤面データ</strong>と<strong>持ち駒データ</strong>、それに続く<strong>手番データ</strong>の３つを記述すれば読み込んで対局可能です。駒の無い升目は<code> * </code>（スペース＋アスタリスク＋スペースの３バイト）で、持ち駒は<code>00</code>に続けて駒の略号を記述します。駒の略号についてはこのページの「駒の動きガイド」の表かアプリ内にある「駒の動き」メニューを参照してください。</p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_input0.png" alt="棋譜入力画面" title="棋譜入力画面" /></p>
</div>

<p>　必要最小限の上記データを読み込んだ直後の画面です。ここで「再開」ボタンをタップすると通常通りゲームを開始できます。<br />
　誤って「新規対局」ボタンをタップすると読み込んだ棋譜ではなく、現在「初期配置」メニューで選ばれている初期配置から新規対局が始まってしまうので気をつけてください。</p>

<h3 id="出力される棋譜ファイルの例">出力される棋譜ファイルの例</h3>

<ol>
  <li>上記の初期盤面からAI同士で対戦した後の出力ファイル例
    <pre><code class="language-Text">' #３三将棋 https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam 
'
'
V2.2
N+AI
N-AI
P1 *  * -OU
P2 *  *  *
P3+OU *  *
P+00KA00FU
P-00GI00GI
+
+0022KA
-1121OU
+0032FU
-2112OU
+3231TO
-0023GI
+3132TO
-2332GI
+3332OU
-0021GI
+3231OU
-2122GI
+3132OU
-0021KA
</code></pre>
    <p>　手番データの後に<strong>指し手データ</strong>が続きます。</p>
  </li>
  <li>初期配置メニューの<strong>Arrange4</strong>を選んでAI同士で対戦した後の出力ファイル例
    <pre><code class="language-Text">' #３三将棋 https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam 
'No. 4
'
V2.2
N+AI
N-AI
P1 * -KA-OU
P2 *  *  * 
P3+OU+KA * 
P+00HI00FU
P-00HI00FU
-
+0032FU
-0012FU
+3231TO
-1213TO
+3121TO
-1121OU
+0032KA
-2131OU
+0021HI
</code></pre>
    <p>　アプリ内のメニューから初期配置を選んで棋譜ファイルを出力した場合は、コメントとして初期配置の番号（No. 4）が出力されます。</p>
  </li>
</ol>

<h3 id="読み込みエラーの意味">読み込みエラーの意味</h3>
<p>　独自に編集した棋譜ファイルを読み込む場合はエラーになる可能性があります。以下の表を参考に棋譜ファイルを編集して再度読み込みを試してみてください。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">エラー番号</th>
      <th style="text-align: left">エラーの意味、可能性のある原因</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">01</td>
      <td style="text-align: left">盤面データの一行が長すぎるか短すぎます。駒のない場所はスペース＋アスタリスク＋スペース（<code> * </code>）の３バイトです。<br />盤面データは一行ずつ改行する必要があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">02</td>
      <td style="text-align: left">盤面データのアルファベット２文字の駒の略号が間違えている可能性があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">03</td>
      <td style="text-align: left">持ち駒データのアルファベット２文字の駒の略号が間違えている可能性があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">04</td>
      <td style="text-align: left">盤面データの先頭<code>P</code>の文字の次は、数値か<code>+</code>か<code>-</code>です。</td>
    </tr>
    <tr>
      <td style="text-align: center">05</td>
      <td style="text-align: left">指し手データの持ち駒を打つ時の記述が間違えている可能性があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">06</td>
      <td style="text-align: left">指し手データの指し手に誤りがあります。飛車（HI）が成っていないのに斜め後ろに移動している等</td>
    </tr>
    <tr>
      <td style="text-align: center">07</td>
      <td style="text-align: left"><code>P</code>、<code>+</code>、<code>-</code>、<code>'</code>、<code>V</code>、<code>T</code>、<code>%</code>、<code>N</code>、<code>$</code>以外の文字が行の先頭にあります。<br /> ちなみに<code>P</code>、<code>+</code>、<code>-</code>以外の文字は読み飛ばして無視しています。</td>
    </tr>
    <tr>
      <td style="text-align: center">08</td>
      <td style="text-align: left">指し手データのアルファベット２文字の駒の略号が間違えています。</td>
    </tr>
    <tr>
      <td style="text-align: center">09</td>
      <td style="text-align: left">手番データ（<code>+</code>か<code>-</code>）は盤面データが記述された後に書かれている必要があります。</td>
    </tr>
  </tbody>
</table>

<h3 id="ソースファイル">ソースファイル</h3>
<p>　<a href="https://github.com/happyclam/shogi33simple">github</a>でCoffeeScriptのソースファイルを公開しました。GUI部分にはまだバグが潜んでいるかもしれませんが、思考ルーチン部分はほぼ落ち着いていると思っています。実際のアプリの先読みメソッド（思考ルーチン）は、浅い先読みを行い候補手のリストを作成しその候補手リストからさらに深読みするという方法を取っているのですが、混みいったコードになるのでその部分は省いています。リリースしてからバグを発生させていたのはほとんどこの候補手を絞り込む部分に関するもので、基本的なところはリリース当初からほとんど変わっていません。対戦型将棋ソフトを作る上で必要最低限なコードになっていると思います。このコードを元に３三将棋だけでなく９×９の本将棋に移行するのも容易だと思います、というか元々Rubyで作った自作の将棋ソフトのコードを元にしてこのアプリを作りました。<br />
　今度はMINI-MAX法＋αβ法ではなく学習型のＡＩに挑戦したいと思っています。</p>

<h3 id="開発資料">開発資料</h3>

<ul>
  <li>クラス図</li>
</ul>

<div style="width:480px; margin: 0 auto;">

  <p><a href="/images/shogi33class.png"><img src="/images/shogi33class.png" alt="クラス図" title="クラス図" /></a></p>

</div>

<ul>
  <li>
    <p>テストツール<br />
　mocha + chai でテストケースを書きました。CoffeeScript+mocha+chai=CaffeineJSと誰かが言ってましたが、まさに依存性のあるカフェインのように癖になりそうなぐらい作りやすかったです。いずれgithubでソースもテストスクリプトも公開する予定です。その時はこの記事を更新します。</p>
  </li>
  <li>
    <p>コンソール版</p>
  </li>
</ul>

<div style="width:480px; margin: 0 auto;">

  <p><a href="/images/shogi33cui.png"><img src="/images/shogi33cui.png" alt="CUI版" title="CUI版" /></a></p>

</div>

<p>　最初は作り易さもあってコンソール画面でも遊べるCUI版（Gameクラス、Boardクラス）から作っていたのですが、将棋の指し手は複数の駒が動ける可能性がある時に「１一銀右」とか「３二銀引成」とか「３一金直」とかいろんなケースが発生するので、それをコンソール画面でコマンドラインのパラメータとして入力させる処理が非常に面倒になります。だから一通りコンソールでも遊べるようになったところで細かいところは未対応のまま放置してGUI版の開発に移行しました。GUIなら駒をタッチ（クリック）するだけなのでUI（ユーザーインターフェース）が作り易くなるからです。それでもコンソールで作っていたBoardクラスは変更を加える必要がなくそのまま継承してBoardGUIクラスを作るだけで済むのはオブジェクト指向プログラミングの面目躍如と言ったところです。</p>

<hr />

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>具体的にはtoString()関数を徹底的に排除して数値のまま処理したことと、末端ノードに達する前に局面の静的評価をして先読み再帰関数の終了条件を増やしたことです。 <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>三手詰めと書くと誤解を与えるので「三手以内の詰み」としています。詰将棋のように王手の連続で詰ますわけではなく、相手が指す手がなくなるような状態も含めて三手以内で勝つという意味です。 <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>今後初期配置パターンが増えてきたら、持ち駒は含めずに盤上の駒だけを検索するように変更するかもしれません。 <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="icon-folder-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#project-ref">
    		project <span>19</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="icon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#coffeescript-ref">coffeescript <span>25</span></a></li>
     
    	<li><a href="/tags.html#cordova-ref">cordova <span>22</span></a></li>
     
    	<li><a href="/tags.html#android-ref">android <span>32</span></a></li>
     
    	<li><a href="/tags.html#javascript-ref">javascript <span>33</span></a></li>
     
    	<li><a href="/tags.html#shogi-ref">shogi <span>15</span></a></li>
    
  



    </ul>
    

    <hr>
    <div class="pagination">
      <ul>
      
        <li class="prev"><a href="/programming/2017-08-12/hybrid_csp" title="ハイブリッドアプリのセキュリティ">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next"><a href="/software/2018-01-27/utifudume" title="打ち歩詰めについて">Next &rarr;</a></li>
      
      </ul>
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'hello-my-world'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';        
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://hello-my-world.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

      </div>
      <hr>
      <footer>
        <p>&copy; 2019 happyclam
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </footer>

    </div>

    
  </body>
</html>

