<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">
  <meta name="author" content="happyclam">
  <meta name="description"
    content="「３三将棋」アプリリリースしました 面白い勝負になりそうな初期配置を探すのが一番難しいかもしれません Reinventing the wheel.">
  <title> 「３三将棋」アプリリリースしました - 自己満足プログラミング </title>

  <!-- Global Site Tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1752720-7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-1752720-7');
  </script>

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@SappierBoy">
  <meta name="twitter:creator" content="@SappierBoy">
  
  <meta name="twitter:title" content="「３三将棋」アプリリリースしました">
  
  
  <meta name="twitter:url" content="/project/2018-01-01/33shogiapp">
  
  
  <meta name="twitter:description" content="初心者ほど簡単と思い込んで負ける。ベテランでも初見で全パターン勝てる人はいないでしょう">
  
  
  <meta name="twitter:image:src" content="https://happyclam.github.io/images/33shogi_logo.png">
  

  <!-- stylesheets -->
  <link media="all" href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
  <link media="all" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link media="all" rel="stylesheet" href="/assets/css/site.css">

</head>


<body>
  <header>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="site-title" class="navbar-brand" href="/">
          <img class="pull-left img-responsive" src="">
          <span class="name-holder">自己満足プログラミング</span>
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbar">

        <ul id="main-menu" class="nav navbar-nav navbar-right">

          
            <li><a href="/">
              <i class="fa fa-home"></i> Home</a>
            </li>
          
            <li><a href="/categories/">
              <i class="fa fa-sitemap"></i> Categories</a>
            </li>
          
            <li><a href="/tags/">
              <i class="fa fa-tag"></i> Tags</a>
            </li>
          
            <li><a href="/about/">
              <i class="fa fa-info-circle"></i> About</a>
            </li>
          
            <li><a href="/policy/">
              <i class="fa fa-check"></i> Policy</a>
            </li>
          

        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
</header>

  <div style="text-align: center;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-9018029357773039",
          enable_page_level_ads: true
      });
    </script>
  </div>
  <div class="blog-header">
    <div class="span3">
      <a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="SappierBoy">Tweet</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>
  </div>
  
  <div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
      <div class="page">

        <header class="page-header">
          <h2 class="page-title"><a href="/project/2018-01-01/33shogiapp">「３三将棋」アプリリリースしました</a></h2>
          <div class="post-metadata">
            <div> <i class="fa fa-calendar"></i>
              <time>
                Monday, January 01, 2018
              </time>
            </div>
            <div> <i class="fa fa-tag"></i>
                
                  <span class="label label-tag">coffeescript</span>
                
                  <span class="label label-tag">cordova</span>
                
                  <span class="label label-tag">android</span>
                
                  <span class="label label-tag">javascript</span>
                
                  <span class="label label-tag">shogi</span>
                
            </div>
          </div>

        </header>

        <article class="page-content">
          <p><a href="https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam"><img src="/images/ja_badge_web_generic.png" alt="３三将棋" title="３三将棋" width="155" height="60" /></a></p>

<h3 id="３三将棋について">「３三将棋」について</h3>
<p>　以前にも<a href="/programming/2016-07-23/33shogi">「３三将棋」に関する記事</a>を書きましたが、実際に作ってみました。<br />
　リリース当初１５通りの初期配置パターンだったものが現在１４８個の初期配置パターンまで増えてますが、盤面編集機能を追加したので今後は増やす予定はありません。<br />
　あと、全てのユーザーが使用している端末がAndroid7.0以上になったので他の将棋関連アプリ（<a href="https://play.google.com/store/apps/details?id=shogi55.io.github.happyclam">５五将棋</a>、<a href="https://play.google.com/store/apps/details?id=shogi77.io.github.happyclam">７七将棋</a>、<a href="https://play.google.com/store/apps/details?id=torishogi.io.github.happyclam">禽将棋</a>）も含めて動作条件をAndroid7.0以上に変更しました。</p>

<h3 id="ルール">ルール</h3>
<ul>
  <li>駒の動きは将棋と同じです。</li>
  <li>打ち歩詰め、二歩は禁止です。</li>
  <li>先手は一段目、後手は三段目に駒を移動すると成ることができます。</li>
  <li>同一局面（手番も同じ）が４回現れると千日手でゲーム終了としています。</li>
  <li>行き場の無い駒は打てません（桂馬を二段目に打ったり、先手が歩を一段目に打ったり）</li>
  <li>王手放置は出来ません（王の自殺手も不可）</li>
</ul>

<div id="boardEdit"></div>
<h3 id="初期配置編集機能">初期配置編集機能</h3>
<p>　Version1.1.7.0から初期配置の編集機能を追加しました。編集したパターンを保存すると初期配置選択画面に反映されます。<br />
　この機能追加により、１４８個の初期配置パターンは予め用意されているだけで自由に上書き可能なものとなりました。３三将棋は最善手を見つけるのも楽しいですが、いい勝負（或いは長手数の詰み）になる初期配置パターンを考えるのも楽しいものですので、予め用意されているパターンが簡単過ぎて詰まらないと感じたら自分独自の初期配置を考えて楽しんでみてください。</p>

<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/shogi33_menu01.png"><img src="/images/shogi33_menu01.png" alt="初期配置編集" width="320" title="初期配置編集" /></a></p>

</div>

<ul>
  <li>左上のチェックマークアイコンをタップすると編集モードになります。</li>
  <li>将棋盤の空いてる場所をタップすると駒選択ダイアログが表示されるので、駒を選ぶと新しく駒が配置されます。</li>
  <li>既に駒があるマス目をタップすると駒が削除されます。</li>
  <li>持ち駒は先手・後手それぞれの駒のボタンをタップすると７枚を上限にカウントアップします。７に達した後タップするとカウントダウンします。</li>
</ul>

<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/shogi33_menu02.png"><img src="/images/shogi33_menu02.png" alt="初期配置保存" width="320" title="初期配置保存" /></a></p>

</div>

<ul>
  <li>編集モード中はメニュー操作は出来ません。盤面を編集し終えたら保存か中止を選んで下さい。保存すると初期配置選択画面に反映されます。中止を選ぶと編集は無かったことになります。</li>
</ul>

<h3 id="対局画面">対局画面</h3>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_battle.png" alt="対戦画面" width="320" title="対戦画面" /></p>
</div>
<p><span>ＡＩ同士の対戦の時だけ局面の評価値を表示するようにしています。左上の数値は手数です。</span></p>

<h4 id="盤面反転機能追加">盤面反転機能追加</h4>
<p>　Version1.1.2.0から盤面の反転（先手・後手を上下逆さま）表示機能追加しました。画面右上の回転矢印アイコンをタップすると後手を手前にして将棋盤を表示出来ます。</p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_reverse.png" alt="盤面反転機能" width="320" title="盤面反転機能" /></p>
</div>

<p>　この機能追加により今までAndroid4.4以上が動作対象機種でしたが、Android5.0以上が必要になります。</p>

<h3 id="メニュー">メニュー</h3>
<ul>
  <li>先手・後手／ＡＩレベル</li>
</ul>

<p><span>ＡＩレベルは４通りから選べます。</span></p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_player.png" alt="Menu - 先手・後手" width="320" title="Menu - 先手・後手" /></p>
</div>

<ul>
  <li>初期配置</li>
</ul>

<p><span>ここで選んだ後に盤面編集して保存すると、この画面に反映されます。</span></p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_placement.png" alt="Menu - 初期配置" width="320" title="Menu - 初期配置" /></p>
</div>

<p><span>「初期配置」のタブをタップして一度閉じてから再度タップすると、現在選択中の初期配置パターンの位置まで選択リスト画面がスクロールします。</span></p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/shogi33_menu03.png" alt="Menu - 選択中の初期配置１" width="320" title="Menu - 選択中の初期配置１" /></p>
</div>
<hr />

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/shogi33_menu04.png" alt="Menu - 選択中の初期配置２" width="320" title="Menu - 選択中の初期配置２" /></p>
</div>

<ul>
  <li>初期配置検索機能</li>
</ul>

<p>　初期配置パターンが１００を超えてきたので、Version1.0.2.6から初期配置検索機能を付けました。</p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_search1.png" alt="Menu - 初期配置検索" width="320" title="Menu - 初期配置検索" /></p>
</div>

<p>　駒を選択して検索ボタンを押下すると、持ち駒あるいは盤上にその駒を使用している初期配置がリストアップされます。駒の選択条件はアンド（＆）検索になっているので、例えば「角」と「香」を選んで検索すると「角」も「香」も使用されている初期配置だけが検索結果に表示されます。</p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_search2.png" alt="Menu - 初期配置検索結果" width="320" title="Menu - 初期配置検索結果" /></p>
</div>

<h3 id="多言語対応">多言語対応</h3>
<p>　Version1.0.4.1から多言語対応しました。対応言語は英語、日本語、繁体中国語、スペイン語で、アプリで使用するメッセージが全てAndroidの言語設定で選んだ言語で表示されます。デフォルトは英語です。</p>

<div id="inout"></div>
<h3 id="クリップボードを使った棋譜の入出力対応">クリップボードを使った棋譜の入出力対応</h3>
<p>　Version1.0.5.0から<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>の棋譜の入出力に対応しました。<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>では棋譜ファイルのヘッダー部分に駒の配置を定義出来るので、好きなように初期配置を定義して読み込ませれば自分が試してみたい初期配置から対戦が可能です。</p>

<ul>
  <li>棋譜出力</li>
</ul>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_output.png" alt="棋譜出力画面" width="320" title="棋譜出力画面" /></p>
</div>

<p>　左上の<del>チェックマーク</del>ファイルアイコンをタップすると共有画面（インテント）が表示されるので、クリップボードやテキストファイルを扱えるアプリ（自分は<a href="https://play.google.com/store/apps/details?id=jp.sblo.pandora.jota">Jota Text Editorというアプリ</a>を使ってます）を選べば棋譜データを貼り付けて保存出来ます。<br />
　<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式</a>の棋譜はヘッダ部分に駒の初期配置を定義出来る（駒落ち将棋にも対応している）ので、駒の初期配置パターンを選択出来るこのアプリに都合がいいと思ったので採用しました。但し<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式</a>の規約を全て網羅しているわけではなく、必要最小限の部分だけ実装しています。<code class="language-plaintext highlighter-rouge">T</code>で始まる指し手の消費時間や<code class="language-plaintext highlighter-rouge">$</code>で始まる棋譜情報は出力されません。以下が出力される棋譜の一例です。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>' #３三将棋 https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam 
'No. 52
'
V2.2
N+AI
N-AI
P1+OU-KA * 
P2 *  *  * 
P3 * +KA-OU
P+00KE
P-00KE
+
+3121OU
-1323OU
+0011KA
-0013KA
+0033KE
-0031KE
+1122KA
-1322KA
</code></pre></div></div>

<ul>
  <li>棋譜入力</li>
</ul>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_input1.png" alt="棋譜入力画面１" width="320" title="棋譜入力画面１" /></p>
</div>

<p>　テキストボックスに棋譜テキストデータを貼り付けて読み込みボタンをタップすれば、棋譜を読み込みます。<a href="https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam">このアプリ</a>自身が出力した棋譜データは読めますが、他のソフトから出力された棋譜データや自前で作成した棋譜データは読み込みに失敗するかもしれません。エラーが発生した場合はその行数を表示しますので、データを編集して試してください。<br />
　※カンマ区切りのマルチステートメントには対応していません。<br />
　※たとえ<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>の棋譜であっても本将棋（９×９）の棋譜は読めません、３三将棋専用です。</p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_input2.png" alt="棋譜入力画面２" width="320" title="棋譜入力画面２" /></p>
</div>

<p>　棋譜を読み込んだ後は通常の対局通り、対局者を変更したり局面を戻して途中から指し継いだり出来ます。</p>

<h3 id="独自の初期配置から対局開始する例">独自の初期配置から対局開始する例</h3>
<p>　Version1.1.7.0から初期配置の編集機能を追加したので棋譜を自分で編集して読み込む必要はなくなりましたが、一応棋譜の入出力機能は残しています。<br />
　棋譜ファイルは<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>のルールに従ってアルファベット２文字からなる駒の略号を使って記述します。<a href="http://www2.computer-shogi.org/protocol/record_v22.html">CSA形式(*.csa)</a>の規約を網羅しているわけではないので、必要最小限のデータの例は以下のようになります。</p>

<pre><code class="language-Text">P1 *  * -OU
P2 *  *  *
P3+OU *  *
P+00KA00FU
P-00GI00GI
+
</code></pre>

<p>　<code class="language-plaintext highlighter-rouge">P</code>に続く<strong>盤面データ</strong>と<strong>持ち駒データ</strong>、それに続く<strong>手番データ</strong>の３つを記述すれば読み込んで対局可能です。駒の無い升目は<code class="language-plaintext highlighter-rouge"> * </code>（スペース＋アスタリスク＋スペースの３バイト）で、持ち駒は<code class="language-plaintext highlighter-rouge">00</code>に続けて駒の略号を記述します。駒の略号についてはこのページの「駒の動きガイド」の表かアプリ内にある「駒の動き」メニューを参照してください。</p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_kifu_input0.png" alt="棋譜入力画面" width="320" title="棋譜入力画面" /></p>
</div>

<p>　必要最小限の上記データを読み込んだ直後の画面です。ここで「再開」ボタンをタップすると通常通りゲームを開始できます。<br />
　誤って「新規対局」ボタンをタップすると読み込んだ棋譜ではなく、現在「初期配置」メニューで選ばれている初期配置から新規対局が始まってしまうので気をつけてください。</p>

<h3 id="出力される棋譜ファイルの例">出力される棋譜ファイルの例</h3>

<ol>
  <li>上記の初期盤面からAI同士で対戦した後の出力ファイル例
    <pre><code class="language-Text">' #３三将棋 https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam 
'
'
V2.2
N+AI
N-AI
P1 *  * -OU
P2 *  *  *
P3+OU *  *
P+00KA00FU
P-00GI00GI
+
+0022KA
-1121OU
+0032FU
-2112OU
+3231TO
-0023GI
+3132TO
-2332GI
+3332OU
-0021GI
+3231OU
-2122GI
+3132OU
-0021KA
</code></pre>
    <p>　手番データの後に<strong>指し手データ</strong>が続きます。</p>
  </li>
  <li>初期配置メニューの<strong>Arrange4</strong>を選んでAI同士で対戦した後の出力ファイル例
    <pre><code class="language-Text">' #３三将棋 https://play.google.com/store/apps/details?id=shogi33.io.github.happyclam 
'No. 4
'
V2.2
N+AI
N-AI
P1 * -KA-OU
P2 *  *  * 
P3+OU+KA * 
P+00HI00FU
P-00HI00FU
-
+0032FU
-0012FU
+3231TO
-1213TO
+3121TO
-1121OU
+0032KA
-2131OU
+0021HI
</code></pre>
    <p>　アプリ内のメニューから初期配置を選んで棋譜ファイルを出力した場合は、コメントとして初期配置の番号（No. 4）が出力されます。</p>
  </li>
</ol>

<h3 id="読み込みエラーの意味">読み込みエラーの意味</h3>
<p>　独自に編集した棋譜ファイルを読み込む場合はエラーになる可能性があります。以下の表を参考に棋譜ファイルを編集して再度読み込みを試してみてください。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">エラー番号</th>
      <th style="text-align: left">エラーの意味、可能性のある原因</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">01</td>
      <td style="text-align: left">盤面データの一行が長すぎるか短すぎます。駒のない場所はスペース＋アスタリスク＋スペース（<code class="language-plaintext highlighter-rouge"> * </code>）の３バイトです。<br />盤面データは一行ずつ改行する必要があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">02</td>
      <td style="text-align: left">盤面データのアルファベット２文字の駒の略号が間違えている可能性があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">03</td>
      <td style="text-align: left">持ち駒データのアルファベット２文字の駒の略号が間違えている可能性があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">04</td>
      <td style="text-align: left">盤面データの先頭<code class="language-plaintext highlighter-rouge">P</code>の文字の次は、数値か<code class="language-plaintext highlighter-rouge">+</code>か<code class="language-plaintext highlighter-rouge">-</code>です。</td>
    </tr>
    <tr>
      <td style="text-align: center">05</td>
      <td style="text-align: left">指し手データの持ち駒を打つ時の記述が間違えている可能性があります。</td>
    </tr>
    <tr>
      <td style="text-align: center">06</td>
      <td style="text-align: left">指し手データの指し手に誤りがあります。飛車（HI）が成っていないのに斜め後ろに移動している等</td>
    </tr>
    <tr>
      <td style="text-align: center">07</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">P</code>、<code class="language-plaintext highlighter-rouge">+</code>、<code class="language-plaintext highlighter-rouge">-</code>、<code class="language-plaintext highlighter-rouge">'</code>、<code class="language-plaintext highlighter-rouge">V</code>、<code class="language-plaintext highlighter-rouge">T</code>、<code class="language-plaintext highlighter-rouge">%</code>、<code class="language-plaintext highlighter-rouge">N</code>、<code class="language-plaintext highlighter-rouge">$</code>以外の文字が行の先頭にあります。<br /> ちなみに<code class="language-plaintext highlighter-rouge">P</code>、<code class="language-plaintext highlighter-rouge">+</code>、<code class="language-plaintext highlighter-rouge">-</code>以外の文字は読み飛ばして無視しています。</td>
    </tr>
    <tr>
      <td style="text-align: center">08</td>
      <td style="text-align: left">指し手データのアルファベット２文字の駒の略号が間違えています。</td>
    </tr>
    <tr>
      <td style="text-align: center">09</td>
      <td style="text-align: left">手番データ（<code class="language-plaintext highlighter-rouge">+</code>か<code class="language-plaintext highlighter-rouge">-</code>）は盤面データが記述された後に書かれている必要があります。</td>
    </tr>
  </tbody>
</table>

<h3 id="駒に毛筆フォント">駒に毛筆フォント</h3>
<p>　Version1.0.7.3から駒のフォントに毛筆フォントを選べるようになりました。無料フォントの中でも<a href="http://today.izmaker.com/blog/technique/3154/">「衡山毛筆フォント」</a>のように再配布可能というものはなかなか無いと思います。</p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_menu_font.png" alt="フォント選択メニュー" width="320" title="フォント選択メニュー" /></p>
</div>

<hr />

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/33shogi_font.png" alt="衡山毛筆フォント" width="320" title="衡山毛筆フォント" /></p>
</div>

<h3 id="push通知対応">Push通知対応</h3>
<p>　Version1.0.9.2からPush通知を受信できます。左上右側にあるアイコンをタップすると受信した最新のメッセージを再度表示します。受信したメッセージがないときは何も表示されません。</p>

<div style="width:320px; margin: 0 auto;">
  <p><a href="/images/push_notification.png"><img src="/images/push_notification.png" alt="Push通知サンプル" width="320" title="Push通知サンプル" /></a></p>
</div>

<h3 id="自動保存機能追加">自動保存機能追加</h3>
<p>　メモリ逼迫時にAndroidによってアプリが強制終了されるケースがあるので、Version1.1.5.0から一手指す毎に棋譜を自動保存する機能を追加しました。<br />
不意にアプリが落ちても起動後「再開」ボタンをタップすることで対局の続きが可能です。<br />
　※棋譜入力欄から入力された棋譜は自動保存の対象になりませんので、必要であれば棋譜出力して保存してください。<br />
　※万が一自動保存に失敗して何らかのエラーが発生しても、「新規開始」すれば新たにファイルが作成されるので問題ありません。それでもエラーが表示される場合は、「アプリ情報」メニューから「ストレージ」を選んで「ストレージを消去」の操作をしてください。その際には対局データは消失し各種設定も初期化されますがご了承ください。</p>

<h3 id="ソースファイル">ソースファイル</h3>
<p>　<a href="https://github.com/happyclam/shogi33simple">github</a>でCoffeeScriptのソースファイルを公開しました。GUI部分にはまだバグが潜んでいるかもしれませんが、思考ルーチン部分はほぼ落ち着いていると思っています。実際のアプリの先読みメソッド（思考ルーチン）は、浅い先読みを行い候補手のリストを作成しその候補手リストからさらに深読みするという方法を取っているのですが、混みいったコードになるのでその部分は省いています。リリースしてからバグを発生させていたのはほとんどこの候補手を絞り込む部分に関するもので、基本的なところはリリース当初からほとんど変わっていません。対戦型将棋ソフトを作る上で必要最低限なコードになっていると思います。このコードを元に３三将棋だけでなく９×９の本将棋に移行するのも容易だと思います、というか元々Rubyで作った自作の将棋ソフトのコードをスマホアプリにするためにCoffeeScript（JavaScript）に書き換えたものです。<br />
　今度はMINI-MAX法＋αβ法ではなく学習型のＡＩに挑戦したいと思っています。</p>

<h3 id="開発資料">開発資料</h3>

<ul>
  <li>クラス図</li>
</ul>

<div style="width:480px; margin: 0 auto;">

  <p><a href="/images/shogi33class.png"><img src="/images/shogi33class.png" alt="クラス図" width="480" title="クラス図" /></a></p>

</div>

<ul>
  <li>
    <p>テストツール<br />
　mocha + chai でテストケースを書きました。CoffeeScript+mocha+chai=CaffeineJSと誰かが言ってましたが、まさに依存性のあるカフェインのように癖になりそうなぐらい作りやすかったです。いずれgithubでソースもテストスクリプトも公開する予定です。その時はこの記事を更新します。</p>
  </li>
  <li>
    <p>コンソール版</p>
  </li>
</ul>

<div style="width:480px; margin: 0 auto;">

  <p><a href="/images/shogi33cui.png"><img src="/images/shogi33cui.png" alt="CUI版" width="480" title="CUI版" /></a></p>

</div>

<p>　最初は作り易さもあってコンソール画面でも遊べるCUI版（Gameクラス、Boardクラス）から作っていたのですが、将棋の指し手は複数の駒が動ける可能性がある時に「１一銀右」とか「３二銀引成」とか「３一金直」とかいろんなケースが発生するので、それをコンソール画面でコマンドラインのパラメータとして入力させる処理が非常に面倒になります。だから一通りコンソールでも遊べるようになったところで細かいところは未対応のまま放置してGUI版の開発に移行しました。GUIなら駒をタッチ（クリック）するだけなのでUI（ユーザーインターフェース）が作り易くなるからです。それでもコンソールで作っていたBoardクラスは変更を加える必要がなくそのまま継承してBoardGUIクラスを作るだけで済むのはオブジェクト指向プログラミングの面目躍如と言ったところです。</p>

<hr />


        </article>
      </div>
    </div>
  </div>
</div>


  

<footer class="footer">
    <div class="container">
      <div class="row">
        <div class="col-lg-offset-3 col-lg-6">
            <div class="row">
              <div class="col-xs-12 text-center">
                <small>&copy; rifyll theme, 2014</small>
              </div>
            </div>
        </div>
      </div>
    </div>
  </footer>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
  <!--<script src="/assets/js/prism.js"></script> -->
  <script src="/assets/js/site.js"></script>

</body>

</html>
