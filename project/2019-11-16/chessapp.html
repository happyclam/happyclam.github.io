<!DOCTYPE html>
<html lang="ja">
  <head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">
  <meta name="author" content="happyclam">
  <meta name="description"
    content="「お気楽チェス」アプリリリース チェス初心者が作ったチェスアプリ Reinventing the wheel.">
  <title> 「お気楽チェス」アプリリリース - 自己満足プログラミング </title>

  <!-- <\!-- Global Site Tag (gtag.js) - Google Analytics -\-> -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1752720-7"></script> -->
  <!-- <script> -->
  <!--   window.dataLayer = window.dataLayer || []; -->
  <!--   function gtag(){dataLayer.push(arguments);} -->
  <!--   gtag('js', new Date()); -->
  <!--   gtag('config', 'UA-1752720-7'); -->
  <!-- </script> -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEV3LMTH6C"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DEV3LMTH6C');
</script>

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@SappierBoy">
  <meta name="twitter:creator" content="@SappierBoy">
  
  <meta name="twitter:title" content="「お気楽チェス」アプリリリース">
  
  
  <meta name="twitter:url" content="/project/2019-11-16/chessapp">
  
  
  <meta name="twitter:description" content="初心者なら十分楽しめる強さだと思います">
  
  
  <meta name="twitter:image:src" content="https://happyclam.github.io/images/chess_icon.png">
  

  <link rel="canonical" href="https://happyclam.github.io/project/2019-11-16/chessapp" />
  <link rel="alternate" type="application/rss+xml" title="自己満足プログラミング" href="/feed.xml" />
  <!-- stylesheets -->
  <link media="all" href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
  <link media="all" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link media="all" rel="stylesheet" href="/assets/css/site.css">

</head>


<body>
  <header>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="site-title" class="navbar-brand" href="/">
          <img class="pull-left img-responsive" src="">
          <span class="name-holder">自己満足プログラミング</span>
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbar">

        <ul id="main-menu" class="nav navbar-nav navbar-right">

          
            <li><a href="/">
              <i class="fa fa-home"></i> Home</a>
            </li>
          
            <li><a href="/categories/">
              <i class="fa fa-sitemap"></i> Categories</a>
            </li>
          
            <li><a href="/tags/">
              <i class="fa fa-tag"></i> Tags</a>
            </li>
          
            <li><a href="/about/">
              <i class="fa fa-info-circle"></i> About</a>
            </li>
          
            <li><a href="/policy/">
              <i class="fa fa-check"></i> Policy</a>
            </li>
          

        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
</header>

  <!-- <script src="https://unpkg.com/simple-jekyll-search@1.5.0/dest/simple-jekyll-search.min.js"></script> -->
  <script src="/assets/js/simple-jekyll-search.min.js"></script>
<!--   <div style="text-align: center;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1238485061299241"
     crossorigin="anonymous"></script>
  </div>
 -->  <div class="blog-header">
    <div class="row-fluid">
      <div class="span3">
        <a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="SappierBoy">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </div>
      <div class="span9">
        <!-- Html Elements for Search -->
        <div id="search-container" align="right">
          <input type="text" id="search-input" placeholder="search...">
          <ul class="searchresult" id="results-container"></ul>
        </div>
        <div class="results"></div>
      </div>
    </div>
<script type="text/javascript">
  SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{category}:{title}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 15,
    fuzzy: false,
  })
</script>
  <script src="/assets/js/jquery.min.js"></script>
  </div>
  <div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
      <div class="page">

        <header class="page-header">
          <h2 class="page-title"><a href="/project/2019-11-16/chessapp">「お気楽チェス」アプリリリース</a></h2>
          <div class="post-metadata">
            <div> <i class="fa fa-calendar"></i>
              <time>
                Saturday, November 16, 2019
              </time>
            </div>
            <div> <i class="fa fa-tag"></i>
                
                  <span class="label label-tag">coffeescript</span>
                
                  <span class="label label-tag">cordova</span>
                
                  <span class="label label-tag">android</span>
                
                  <span class="label label-tag">javascript</span>
                
                  <span class="label label-tag">chess</span>
                
            </div>
          </div>

        </header>

        <article class="page-content">
          <p><a href="https://happyclam.booth.pm/items/6399553"><img src="/images/booth_logo.png" alt="お気楽チェス" title="お気楽チェス - Chess" width="168" height="60" /></a>
<a href="https://www.amazon.co.jp/dp/B082412BRQ/ref=sr_1_1?qid=1575089134&amp;refinements=p_4%3Ahappyclam&amp;s=mobile-apps&amp;search-type=ss&amp;sr=1-1"><img src="/images/amazon-appstore-badge-jp-white.png" alt="お気楽チェス" title="お気楽チェス" width="155" height="60" /></a></p>

<h3 id="お気楽チェスアプリについて">「お気楽チェス」アプリについて</h3>
<p>　チェス初心者がチェスを楽しむために作りました。チェスに自信のある方にとっても終盤は手強いと思います。他のチェスアプリでは味わえない奇抜な手を楽しんでください。<br />
　</p>
<h3 id="機能">機能</h3>
<ol>
  <li>３つのＡＩレベル選択</li>
  <li>ＡＩ対ＡＩ、人対ＡＩ、人対人の対戦</li>
  <li>駒の可動箇所ガイド機能</li>
  <li>ゲーム中断、途中再開機能</li>
  <li>二ヶ国語対応（日本語、英語）</li>
  <li>棋譜の入出力機能</li>
  <li>対局自動保存機能</li>
</ol>

<h3 id="盤面">盤面</h3>
<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_board01.png"><img src="/images/chessapp_board01.png" alt="チェス盤面１" width="320" height="369" title="チェス盤面１" /></a></p>

</div>

<ul>
  <li>駒は二種類から選べます。</li>
</ul>

<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_board02.png"><img src="/images/chessapp_board02.png" alt="チェス盤面２" width="320" height="439" title="チェス盤面２" /></a></p>

</div>

<p>※同一局面が３回で千日手でゲーム終了としています。<br />
　ＡＩはなるべく千日手を避ける仕様になっていますが、絶対千日手にならないとは言えません。</p>

<ul>
  <li>ゲームを中断して前の局面に戻って再開することも出来ます。</li>
  <li>ゲーム中に歯車のアイコンをタップすると強制的にゲームを中断して設定メニュー画面に移行します。ゲーム盤面に戻って再開ボタンをタップすれば続きからゲームを再開出来ます。</li>
  <li>右上の矢印アイコンをタップすると盤面を回転表示します。</li>
  <li>右上のキャレット（∧、∨）アイコンをタップすると取った駒の数と手数を表示します。もう一度タップすると非表示にします。端末の画面サイズに合わせてご利用ください。</li>
</ul>

<h3 id="ａｉレベル">ＡＩレベル</h3>
<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_menu01.png"><img src="/images/chessapp_menu01.png" alt="ＡＩレベル" width="320" height="167" title="ＡＩレベル" /></a></p>

</div>

<ul>
  <li>ＡＩのレベルは３段階。</li>
</ul>

<p>　アプリ側の強さを最強（「長考」）にして<a href="https://www.chess.com">chess.com</a>でコンピュータと対戦させてみたところ、現状では<a href="https://www.chess.com">chess.com</a>のLevel3と勝ったり負けたり、Level4やLevel5に偶に勝てるぐらいの強さのようです。<br />
　以下のPGNファイルの内容をアプリで読み込めば棋譜が再現できます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{先手（White）でchess.comのレベル５と対戦してアプリが勝った棋譜}
1. e3 d5 2. Qh5 h6 3. Bb5+ Nc6 4. Ne2 a6 5. Bxc6+ bxc6 6. d3 g5 7. Nd2 e5 8. O-O
Nf6 9. Qf3 Bg7 10. Nc3 Rb8 11. h3 g4 12. Qg3 e4 13. Qe5+ Qe7 14. d4 Qxe5 15.
dxe5 Nd7 16. f4 exf3 17. hxg4 fxg2 18. Kxg2 h5 19. b4 Nxe5 20. Bb2 a5 21. Ne2
hxg4 22. a3 axb4 23. axb4 Be6 24. Rh1 Kd7 25. Bxe5 Bxe5 26. Rxh8 Bxh8 27. Rh1
Bg7 28. Rh7 Bh8 29. Nb3 Bf5 30. Rxf7+ Ke6 31. Rxc7 Be4+ 32. Kg1 Kd6 33. Rf7 Be5
34. Nc5 Rxb4 35. Nb7+ Rxb7 36. Rxb7 Kc5 37. Nd4 Bh8 38. Ne6+ Kc4 39. Rc7 Kc3 40.
Rxc6+ Kb4 41. Nc7 Ba1 42. Ra6 Bg7 43. Rc6 Bb2 44. Kf1 g3 45. Kg1 Bg7 46. Ra6 Bh8
47. Ra8 Be5 48. c3+ Kc5 49. Ne6+ Kc4 50. Rc8+ Kd3 51. Nc5+ Kxe3 52. Rg8 Kf3 53.
Rf8+ Kg4 54. Rg8+ Kh4 55. Rf8 Kg4 56. Rg8+ Kf4 57. Rf8+ Bf5 58. Ne6+ Ke4 59.
Nc5+ Kf4 60. Nb7 Bg7 61. Ra8 d4 62. Nd6 d3 63. Ra4+ Kg5 64. Ra5 Kg4 65. Nxf5 d2
66. Ne3+ Kf3 67. Nd1 Bf6 68. Rf5+ Ke4 69. Rxf6 Kd3 70. Kf1 Kc2 71. Ke2 Kb3 72.
Kxd2 g2 73. Rg6 Kc4 74. Ne3+ Kb3 75. Nxg2 Kc4 76. Nf4 Kb3 77. Ne6 Ka3 78. Ng7
Kb3 79. Ne6 Ka2 80. Ng7 Ka1 81. Kc2 Ka2 82. Ra6# 1-0
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{先手（White）でchess.comのレベル４と対戦してアプリが勝った棋譜}
1. e3 Nf6 2. Qe2 d6 3. Qc4 e6 4. Nc3 Nbd7 5. a4 Rb8 6. Nf3 b6 7. b4 Be7 8. Bb2
Bb7 9. Nb5 h5 10. Nxc7+ Kf8 11. Ng5 Ne5 12. Ncxe6+ fxe6 13. Nxe6+ Kg8 14. Bxe5
d5 15. Nxd8 dxc4 16. Bxb8 Bd5 17. Bxc4 Kh7 18. Bxd5 Bxb4 19. Nf7 Re8 20. Bc6
Rxb8 21. Ke2 Kg8 22. Rab1 Kxf7 23. Rxb4 Ke7 24. Rhb1 Rf8 25. Rf4 Ke6 26. e4 Ke7
27. e5 Nd7 28. Rxf8 Nxf8 29. Bd5 Kd7 30. h4 Ng6 31. e6+ Kd6 32. Bc4 Kc5 33. Ba2
Kc6 34. e7 Kd7 35. Be6+ Ke8 36. Bc4 Kd7 37. e8=Q+ Kxe8 38. Bb5+ Ke7 39. Bc6 Kf7
40. Bd5+ Kf6 41. g3 Ne7 42. Bf3 Kf7 43. Bxh5+ Kf6 44. Bf3 Kf7 45. g4 Kf8 46. Be4
Nc8 47. a5 Kf7 48. Bd5+ Kf8 49. axb6 axb6 50. Be4 Ke7 51. Bd5 Kd6 52. Bf7 Kc7
53. Be6 Nd6 54. Bd5 Ne8 55. Rb3 Kd8 56. Rxb6 Kc7 57. Rb5 Kd8 58. Rb6 Kd7 59. Ra6
g6 60. Rxg6 Kd8 61. Rb6 Kc8 62. Be6+ Kc7 63. Rb1 Nf6 64. g5 Nh7 65. Bg8 Kd7 66.
Bxh7 Kc6 67. Be4+ Kd7 68. h5 Ke8 69. c4 Kf8 70. c5 Ke7 71. Bd5 Kf8 72. f4 Ke7
73. h6 Kf8 74. f5 Ke7 75. h7 Kf8 76. h8=Q+ Ke7 77. Rb7# 1-0
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{後手（Black）でchess.comのレベル３と対戦してアプリが勝った棋譜}
1. e3 e5 2. Nc3 Qg5 3. h4 Qf5 4. d3 Bb4 5. Qd2 Nf6 6. a3 Ba5 7. Nf3 d5 8. Qe2
Bxc3+ 9. Kd1 Ba5 10. Ra2 Ke7 11. h5 Bd7 12. c3 Na6 13. Ra1 Nc5 14. Ke1 Bb5 15.
Nd4 Nxd3+ 16. Qxd3 Bxd3 17. Nxf5+ Bxf5 18. h6 g5 19. Be2 Rhg8 20. Bd1 Bb6 21. b3
a5 22. g3 a4 23. c4 axb3 24. Kf1 dxc4 25. a4 Bc5 26. Kg2 Rgd8 27. Re1 Bb4 28.
Rf1 Bc5 29. Kg1 Bh3 30. Bxb3 Bxf1 31. Ba2 Rxa4 32. f4 Bh3 33. Bb2 c3 34. Bc1
exf4 35. Kh2 fxe3 36. g4 Bxg4 37. Kg3 Bf5 38. Bb2 cxb2 39. Bb1 Rg4+ 40. Kf3
bxa1=Q 41. Bc2 Qf1# 0-1
</code></pre></div></div>

<h3 id="駒の動き">駒の動き</h3>
<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_menu02.png"><img src="/images/chessapp_menu02.png" alt="移動ガイド" width="320" height="401" title="移動ガイド" /></a></p>

</div>

<ul>
  <li>駒の略号のアルファベットは棋譜に使用します。</li>
</ul>

<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_board03.png"><img src="/images/chessapp_board03.png" alt="チェス盤面３" width="320" height="430" title="チェス盤面３" /></a></p>

</div>

<ul>
  <li>駒をタップすると移動可能なマス目を表示します。</li>
</ul>

<h3 id="棋譜の入出力">棋譜の入出力</h3>
<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_menu03.png"><img src="/images/chessapp_menu03.png" alt="棋譜入出力" width="320" height="220" title="棋譜入出力" /></a></p>

</div>

<p>　テキストボックスにPGN形式の棋譜ファイルをペーストして棋譜を読み込んでゲームを再開出来ます。棋譜を出力する時は左上のチェックマークボタンをタップすれば、テキストファイルを扱えるアプリやクリップボードに棋譜データ（*.pgn）を送信することが出来ます。<br />
　棋譜の入出力には<a href="https://github.com/jhlywa/chess.js/blob/master/README.md">チェス用ライブラリ（chess.js）</a>を使用しています。このライブラリはドキュメントにも書いてあるように、チェスに関するＡＩ以外の機能はほぼ全て網羅していて非常に便利です<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>。<a href="https://www.chess.com">chess.com</a>でも使用されているそうです。</p>

<h3 id="自動保存機能">自動保存機能</h3>
<p>　メモリ逼迫時にAndroidによってアプリが強制終了されるケースがあるので、一手指す毎に棋譜を自動保存する機能を追加しました。<br />
不意にアプリが落ちても起動後「再開」ボタンをタップすることで対局の続きが可能です。<br />
　※万が一自動保存に失敗して何らかのエラーが発生しても、「新規開始」すれば新たにファイルが作成されるので問題ありません。それでもエラーが表示される場合は、「アプリ情報」メニューから「ストレージ」を選んで「ストレージを消去」の操作をしてください。その際には対局データは消失し各種設定も初期化されますがご了承ください。</p>

<h3 id="評価値表示">評価値表示</h3>
<div style="width:320px; margin: 0 auto;">

  <p><a href="/images/chessapp_board04.png"><img src="/images/chessapp_board04.png" alt="チェス盤面４" width="320" height="368" title="チェス盤面４" /></a></p>

</div>

<ul>
  <li>対戦相手にＡＩを選択すると、対戦中に局面の評価値を赤字で表示します。先手（White）が有利な場合は正の方向、後手（Black）が有利な場合は負の方向に評価値が変動します。</li>
</ul>

<h4 id="評価関数">評価関数</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Piece \ Weight</th>
      <th style="text-align: right">　Standard　　</th>
      <th style="text-align: center">　Promote　</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">♔, ♚</td>
      <td style="text-align: right">9999</td>
      <td style="text-align: center">-</td>
    </tr>
    <tr>
      <td style="text-align: left">♕, ♛</td>
      <td style="text-align: right">90</td>
      <td style="text-align: center">-</td>
    </tr>
    <tr>
      <td style="text-align: left">♖, ♜</td>
      <td style="text-align: right">50</td>
      <td style="text-align: center">-</td>
    </tr>
    <tr>
      <td style="text-align: left">♗, ♝</td>
      <td style="text-align: right">30</td>
      <td style="text-align: center">-</td>
    </tr>
    <tr>
      <td style="text-align: left">♘, ♞</td>
      <td style="text-align: right">30</td>
      <td style="text-align: center">-</td>
    </tr>
    <tr>
      <td style="text-align: left">♙, ♟</td>
      <td style="text-align: right">10</td>
      <td style="text-align: center">-</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: center">♕, ♛ 90</td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: center">♖, ♜ 50</td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: center">♗, ♝ 30</td>
    </tr>
    <tr>
      <td style="text-align: left"> </td>
      <td style="text-align: right"> </td>
      <td style="text-align: center">♘, ♞ 30</td>
    </tr>
  </tbody>
</table>

<p>　上記表の駒の重みに、可動割合（モビリティ）を掛けて局面を評価しています<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>。<br />
<code class="language-plaintext highlighter-rouge">駒の価値＝駒の重み（固定値） ×（１+ 現時点での駒の可動箇所数／駒の最大可動箇所数）</code>という式で駒の価値を計算し、局面の静的評価値＝（先手の駒の価値の合計 ー 後手の駒の価値の合計）とすることで先手が有利な場合は正の方向、後手が有利な時は負の方向に評価値が変動します。<br />
　詳しい仕様に興味ある方は<a href="/software/2018-12-29/evaluate">この記事</a>や<a href="/software/2019-10-27/stalemate">この記事</a>も参照してください。</p>

<div>
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- display01 -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9018029357773039" data-ad-slot="3925247388" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<hr />

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>自分の場合は自作の将棋アプリを改変してチェスアプリを作りましたが、新規にチェスアプリを作ってみようと思う人は、最初からchess.jsを使用することを前提にＡＩを作成すれば、効率的に作成出来ると思います。 <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>可動割合を掛けるのはキング（♔, ♚）を除く駒だけで、キングの重みは常に固定値です。キング（♔, ♚）の可動性を重視するとキング自ら危険地帯（敵陣）に向かっていき弱くなります。 <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        </article>
      </div>
    </div>
  </div>
</div>


  

<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-offset-3 col-lg-6">
        <div class="row">
          <div class="col-xs-12 text-center">
            <small>&copy; rifyll theme, 2014</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
  <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script> -->
  <script src="/assets/js/bootstrap.min.js"></script>

  <!--<script src="/assets/js/prism.js"></script> -->
  <script src="/assets/js/site.js"></script>
</body>

</html>
