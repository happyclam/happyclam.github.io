<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">
  <meta name="author" content="happyclam">
  <meta name="description"
    content="「消える三目並べ」リリースしました 対戦を重ねる度に強くなります Reinventing the wheel.">
  <title> 「消える三目並べ」リリースしました - 自己満足プログラミング </title>

  <!-- Global Site Tag (gtag.js) - Google Analytics -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1752720-7"></script> -->
  <!-- <script> -->
  <!--   window.dataLayer = window.dataLayer || []; -->
  <!--   function gtag(){dataLayer.push(arguments);} -->
  <!--   gtag('js', new Date()); -->
  <!--   gtag('config', 'UA-1752720-7'); -->
  <!-- </script> -->

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@SappierBoy">
  <meta name="twitter:creator" content="@SappierBoy">
  
  <meta name="twitter:title" content="「消える三目並べ」リリースしました">
  
  
  <meta name="twitter:url" content="/project/2017-07-11/tictactoe-van">
  
  
  <meta name="twitter:description" content="進化する三目並べの第二弾、引き分けばかりで飽きた人のために">
  
  
  <meta name="twitter:image:src" content="https://happyclam.github.io/images/van_logo114.png">
  

  <!-- stylesheets -->
  <link media="all" href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
  <link media="all" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link media="all" rel="stylesheet" href="/assets/css/site.css">

</head>


<body>
  <header>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="site-title" class="navbar-brand" href="/">
          <img class="pull-left img-responsive" src="">
          <span class="name-holder">自己満足プログラミング</span>
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbar">

        <ul id="main-menu" class="nav navbar-nav navbar-right">

          
            <li><a href="/">
              <i class="fa fa-home"></i> Home</a>
            </li>
          
            <li><a href="/categories/">
              <i class="fa fa-sitemap"></i> Categories</a>
            </li>
          
            <li><a href="/tags/">
              <i class="fa fa-tag"></i> Tags</a>
            </li>
          
            <li><a href="/about/">
              <i class="fa fa-info-circle"></i> About</a>
            </li>
          
            <li><a href="/policy/">
              <i class="fa fa-check"></i> Policy</a>
            </li>
          

        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
</header>

  <!-- <script src="https://unpkg.com/simple-jekyll-search@1.5.0/dest/simple-jekyll-search.min.js"></script> -->
  <script src="/assets/js/simple-jekyll-search.min.js"></script>
  <div style="text-align: center;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-9018029357773039",
          enable_page_level_ads: true
      });
    </script>
  </div>
  <div class="blog-header">
    <div class="row-fluid">
      <div class="span3">
        <a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="SappierBoy">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </div>
      <div class="span9">
        <!-- Html Elements for Search -->
        <div id="search-container" align="right">
          <input type="text" id="search-input" placeholder="search...">
          <ul class="searchresult" id="results-container"></ul>
        </div>
        <div class="results"></div>
      </div>
    </div>
<script type="text/javascript">
  SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{category}:{title}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 15,
    fuzzy: false,
  })
</script>
  </div>
  <div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
      <div class="page">

        <header class="page-header">
          <h2 class="page-title"><a href="/project/2017-07-11/tictactoe-van">「消える三目並べ」リリースしました</a></h2>
          <div class="post-metadata">
            <div> <i class="fa fa-calendar"></i>
              <time>
                Tuesday, July 11, 2017
              </time>
            </div>
            <div> <i class="fa fa-tag"></i>
                
                  <span class="label label-tag">coffeescript</span>
                
                  <span class="label label-tag">cordova</span>
                
                  <span class="label label-tag">tictactoe</span>
                
                  <span class="label label-tag">android</span>
                
                  <span class="label label-tag">javascript</span>
                
            </div>
          </div>

        </header>

        <article class="page-content">
          <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script src="/assets/js/jquery.min.js"></script>

<script src="/assets/js/jquery.flot.min.js"></script>

<script src="/assets/js/flotr2.min.js" type="text/javascript"></script>

<script src="/assets/js/jquery.flot.selection.js" type="text/javascript"></script>

<p><a href="https://play.google.com/store/apps/details?id=tictactoe_van.io.github.happyclam"><img src="/images/ja_badge_web_generic.png" alt="消える三目並べ" title="消える三目並べ" width="155" height="60" /></a></p>

<h3 id="消える三目並べtic-tac-toe-vanについて">「消える三目並べ（Tic-tac-toe Van）」について</h3>
<p>　「消える三目並べ（Tic-tac-toe Van）」は、機械学習型三目並べアプリの第二弾です。前作（<a href="https://play.google.com/store/apps/details?id=io.github.happyclam">「進化する三目並べ（Tic-tac-toe Evo）」</a>）は通常の三目並べでしたが、今回は３手前に打った自分の駒が消えるルールの三目並べです。前作は初期データとして全く学習していないデータを使用していましたが、今回の「消える三目並べ」は出現し得る局面の数が通常の三目並べより多いため、初期データとしてある程度学習済みのデータを使用しています。対戦を重ねる度に強くなる点は同じです。</p>

<h3 id="ルール">ルール</h3>
<ul>
  <li>×が先手、○が後手で変更できません。</li>
  <li>通常の三目並べ同様にラインを揃えれば勝ちですが、３手前に打った自分の駒が消えるのでそれを見越した上で指し手を選択する必要があります。</li>
</ul>

<div style="width:640px; margin: 0 auto;">
  <p><img src="/images/van_serial.png" alt="メイン画面" width="641" height="271" title="メイン画面" /></p>
</div>
<p><span>上記のようにゲームが進行した場合、ｘのラインを揃えようとして下段真ん中をタッチしても
三手前の×が消えるので×のラインは揃わず、逆に◯を揃えられて負けてしまいます。</span></p>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/tictactoe-van-win.png" alt="メイン画面" width="320" height="418" title="メイン画面" /></p>
</div>

<ul>
  <li>引き分けはありません。厳密に言うとゲームの特性上はある限定した局面から先手・後手双方が最善手を続けることで同じ局面の繰り返しに陥る可能性があるのですが、もしそうなってもAI側が手を変えます。</li>
</ul>

<h3 id="メニュー">メニュー</h3>
<ul>
  <li>学習機能</li>
</ul>

<p><span>学習機能 On/Off を選択します。Onにするとゲームを終了する度に学習データを書き込むための時間が必要になります</span></p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_learning.png" alt="Menu - 学習機能" width="320" height="292" title="Menu - 学習機能" /></p>
</div>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/saving_message.png" alt="学習データ保存中ダイアログ" width="320" height="414" title="学習データ保存中ダイアログ" /></p>
</div>
<p><span>「Saving Learning Data…」のダイアログ表示中に次のゲームを開始する等の操作をすることはタイミング次第で出来なくはないですが、アプリがファイルを書きこんでいる最中はすべての操作が出来なくなります。</span></p>

<ul>
  <li>難易度
    <ul>
      <li>Easyモード:<br />
  ３手前に打った駒（×、◯）が徐々に薄くなって消えていく（Fade Away）ので、次にどの駒が消えるか分かるので勝ちやすいです。</li>
      <li>Normalモード:<br />
３手前に打った駒（×、◯）がいきなり消える（Vanish）ので、次にどの駒が消えるか覚えておく必要があるため勝つのが難しくなります。</li>
    </ul>
  </li>
</ul>

<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_difficulty.png" alt="Menu - 難易度" width="320" height="287" title="Menu - 難易度" /></p>
</div>

<div style="width:640px; margin: 0 auto;">
  <p><img src="/images/van-easy.png" alt="メイン画面 - Easyモード" width="320" height="136" title="メイン画面 - Easyモード" /></p>
</div>
<p><span>Easyモードに設定した場合、上記のよう古い駒（×、◯）が徐々に薄く描画されます。次にどの駒が消えるか覚えなくてもいいので戦い易くなります。AIの指し手の選択自体はNormalモードもEasyモードも違いはありません。</span></p>

<ul>
  <li>対戦成績</li>
</ul>

<p><span>Easyモード、Normalモードそれぞれの対戦成績を表示します。</span></p>
<div style="width:320px; margin: 0 auto;">
  <p><img src="/images/menu_records.png" alt="Menu - 対戦成績" width="320" height="451" title="Menu - 対戦成績" /></p>
</div>

<h3 id="学習データ">学習データ</h3>
<p>　AI用の初期データとしてある程度学習済みのデータ（MIN-MAX法を使った最強プログラムと10,000回対戦させたデータ）を使用しています。以下のグラフはまったく学習させていないところから乱数プログラムと最強プログラムの２種類のプログラムと対戦テストを行って、アプリの勝率の推移をグラフにしたものです。グラフの黄色のラインの経過を経たデータを初期データとしてアプリに同梱しています。最強のプログラムに対して勝率５割には達していませんので、初心者の方でも全く勝てないなんてことはないと思います。</p>

<div id="vanishing-tictactoe" style="width:600px;height:400px;"></div>

<p><button id="unzoom">元に戻す</button><span>　※範囲をドラッグすれば、グラフを zoom up 出来ます</span></p>

<p>　手数の推移は参考程度に見て下さい。グラフではわかりにくいほどの微妙な違いですが、最強プログラムと対戦テストを行った場合（水色のグラフ）、最初は最強プログラムに対して短手数で簡単に負けていたアプリが学習が進むに連れてなかなか負けないようになり手数が徐々に伸びていっていることがわかります。また、乱数プログラムと対戦テストを行った場合（緑色のグラフ）はお互いに弱い者同士なのでなかなか決着が付かずにゲーム終了までに無意味に長い手数が必要だったものが、学習を積み重ねることによってアプリ側が勝ち方を覚えていき、ゲーム終了までの手数が徐々に短くなっていくことが見て取れます。<br />
　プロットするのが大変なのでグラフにはしていませんが、対乱数プログラムとの対戦グラフ（赤色のグラフ）は100,000回までテスト回数を伸ばすと９割以上の勝率にまで伸びることを確認しています。このグラフの１０倍の回数対戦させて９割ですので、かなり緩やかな右肩上がりのグラフです。対最強プログラムのグラフも（黄色のグラフ）も同様に緩やかな右肩上がりに推移すると思われます。</p>

<script type="text/javascript">
jQuery(function ($){

linegraph = function() {
    var equation1 = [[1 ,0],[2 ,0],[3 ,0],[4 ,2],[5 ,0],[6 ,0],[7 ,0],[8 ,3],[9 ,2],[10 ,1],[11 ,0],[12 ,1],[13 ,0],[14 ,0],[15 ,1],[16 ,0],[17 ,1],[18 ,1],[19 ,2],[20 ,0],[21 ,1],[22 ,2],[23 ,2],[24, 0],[25 ,2],[26 ,4],[27 ,3],[28 ,3],[29 ,4],[30 ,4],[31 ,4],[32 ,5],[33 ,2],[34 ,9],[35 ,6],[36, 6],[37, 14],[38, 7],[39, 13],[40, 20],[41, 19],[42, 20],[43, 11],[44, 14],[45, 16],[46, 34],[47, 20],[48, 33],[49, 33],[50, 27],[51, 24],[52, 21],[53, 30],[54, 28],[55, 36],[56, 31],[57, 21],[58, 36],[59, 29],[60, 27],[61, 39],[62, 30],[63, 37],[64, 27],[65, 32],[66, 39],[67, 25],[68, 33],[69, 31],[70, 23],[71, 36],[72, 18],[73, 25],[74, 32],[75, 36],[76, 30],[77, 30],[78, 27],[79, 21],[80, 31],[81, 33],[82, 30],[83, 30],[84, 40],[85, 25],[86, 19],[87, 36],[88, 31],[89, 36],[90, 30],[91, 28],[92, 39],[93, 31],[94, 30],[95, 29],[96, 30],[97, 23],[98, 27],[99, 28],[100, 30]];
    var equation2 = [[1, 6.56],[2, 6.7],[3, 6.89],[4, 7.0],[5, 6.9],[6, 6.95],[7, 6.75],[8, 7.05],[9, 6.71],[10, 7.25],[11, 6.88],[12, 7.05],[13, 7.28],[14, 7.22],[15, 6.81],[16, 6.80],[17, 7.16],[18, 7.24],[19, 7.2],[20, 6.85],[21, 7.05],[22, 7.20],[23, 7.16],[24, 7.07],[25, 6.65],[26, 7.90],[27, 7.09],[28, 7.23],[29, 6.96],[30, 7.77],[31, 7.04],[32, 7.51],[33, 7.18],[34, 7.40],[35, 7.45],[36, 7.30],[37, 7.04],[38, 7.30],[39, 7.79],[40, 7.42],[41, 7.77],[42, 7.89],[43, 7.41],[44, 7.49],[45, 7.64],[46, 7.80],[47, 7.46],[48, 7.82],[49, 7.82],[50, 7.95],[51, 7.92],[52, 7.53],[53, 8.0],[54, 7.43],[55, 8.36],[56, 7.95],[57, 7.48],[58, 8.53],[59, 7.86],[60, 7.55],[61, 7.7],[62, 7.84],[63, 7.97],[64, 7.79],[65, 7.73],[66, 7.92],[67, 7.85],[68, 7.88],[69, 7.6],[70, 7.89],[71, 7.88],[72, 7.21],[73, 7.68],[74, 7.93],[75, 8.12],[76, 7.89],[77, 7.52],[78, 7.82],[79, 7.50],[80, 8.43],[81, 7.81],[82, 7.76],[83, 7.91],[84, 7.85],[85, 7.31],[86, 7.60],[87, 7.82],[88, 7.79],[89, 7.72],[90, 7.66],[91, 7.66],[92, 8.27],[93, 7.90],[94, 7.42],[95, 7.56],[96, 7.68],[97, 7.94],[98, 7.44],[99, 7.77],[100, 7.58]];
    var equation3 = [[1, 46],[2, 54],[3, 52],[4, 53],[5, 49],[6, 50],[7, 44],[8, 47],[9, 49],[10, 50],[11, 57],[12, 56],[13 ,59],[14, 48],[15, 54],[16, 49],[17, 52],[18, 45],[19, 56],[20, 41],[21, 57],[22, 53],[23, 56],[24, 53],[25, 59],[26, 54],[27, 56],[28, 63],[29, 60],[30, 51],[31, 56],[32, 59],[33, 67],[34, 59],[35, 61],[36, 57],[37, 62],[38, 61],[39, 55],[40, 57],[41, 52],[42, 62],[43, 55],[44, 61],[45, 52],[46, 65],[47, 64],[48, 63],[49, 54],[50, 65],[51, 61],[52, 70],[53, 49],[54, 58],[55, 74],[56, 51],[57, 63],[58, 56],[59, 65],[60, 61],[61, 60],[62, 60],[63, 66],[64, 63],[65, 62],[66, 59],[67, 54],[68, 67],[69, 65],[70, 71],[71, 58],[72, 56],[73, 69],[74, 54],[75, 65],[76, 66],[77, 70],[78, 51],[79, 64],[80, 59],[81, 64],[82, 65],[83, 72],[84, 62],[85, 62],[86, 58],[87, 65],[88, 72],[89, 79],[90, 66],[91, 53],[92, 67],[93, 69],[94, 65],[95, 65],[96, 64],[97, 66],[98, 56],[99, 63],[100, 56]];
    var equation4 = [[1, 13.94],[2, 13.33],[3, 12.43],[4, 14.14],[5, 12.39],[6, 12.42],[7, 13.18],[8, 12.60],[9, 13.42],[10, 12.55],[11, 12.94],[12, 14.42],[13, 12.65],[14, 12.98],[15, 12.23],[16, 10.84],[17, 13.43],[18, 11.94],[19, 12.83],[20, 12.65],[21, 13.19],[22, 12.50],[23, 12.83],[24, 11.57],[25, 11.57],[26, 12.69],[27, 12.52],[28, 13.43],[29, 12.10],[30, 13.97],[31, 12.41],[32, 11.81],[33, 12.72],[34, 10.62],[35, 12.97],[36, 12.27],[37, 11.99],[38, 12.47],[39, 9.19],[40, 13.07],[41, 12.55],[42, 11.37],[43, 12.49],[44, 12.96],[45, 11.47],[46, 11.82],[47, 11.89],[48, 11.97],[49, 12.72],[50, 11.87],[51, 12.43],[52, 12.62],[53, 12.08],[54, 12.08],[55, 10.54],[56, 11.26],[57, 11.22],[58, 10.87],[59, 11.59],[60, 11.62],[61, 11.73],[62, 11.25],[63, 10.56],[64, 12.0],[65, 12.28],[66, 12.24],[67, 11.32],[68, 11.74],[69, 11.02],[70, 11.59],[71, 11.90],[72, 10.46],[73, 11.91],[74, 11.30],[75, 10.79],[76, 11.78],[77, 10.46],[78, 10.73],[79, 12.55],[80, 12.06],[81, 11.31],[82, 10.15],[83, 12.43],[84, 10.74],[85, 10.96],[86, 13.80],[87, 11.90],[88, 11.74],[89, 10.0],[90, 10.64],[91, 12.30],[92, 11.17],[93, 11.45],[94, 10.08],[95, 10.62],[96, 10.13],[97, 11.58],[98, 11.43],[99, 12.26],[100, 12.28]];

    var $el = $("#vanishing-tictactoe"),
        data = [
            {data: equation1, label: "対最強プログラム勝数"},
            {data: equation2, label: "対最強プログラム平均手数"},
            {data: equation3, label: "対乱数プログラム勝数"},
            {data: equation4, label: "対乱数プログラム平均手数"}
            ],
        options = {
            legend: {position: "nw"},
            selection: {mode: "xy", color: "#eeeeee"},
            title: "勝敗の推移",
            subtitle: "対最強プログラム",
            HtmlText: false,
            lines:{show: true, horizontal:false},
            xaxis:{
                max: 100,
                ticks: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, [100, "×100回"]],
                title: "対戦回数（×１００）"
            },
            yaxis:{
                ticks: 20,
                min: 0,
                max: 100,
                title: "対戦結果（勝ち数／手数）"
            },
            grid: {
                verticalLines: true,
                horizontalLines: true,
                outline: "ws"
            },
            mouse: {
                track:true,
                trackDecimals: 0
            }
        }, plotObj;

    $el.on("plotselected", function(ev, ranges) {
        plotObj = $.plot($el, data,
                         $.extend(true, {}, options, {
                             xaxis: {min: ranges.xaxis.from, max: ranges.xaxis.to},
                             yaxis: {min: ranges.yaxis.from, max: ranges.yaxis.to}
                         })
                        );
    });
    plotObj = $.plot($el, data, options);
    $("#unzoom").click(function() {
        plotObj = $.plot($el, data, options);
    });
};

if (typeof contentLoaded != "undefined") {
    contentLoaded.done(linegraph);
} else {
    window.addEventListener('load', linegraph);
}

});

</script>

<div>
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- display01 -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9018029357773039" data-ad-slot="3925247388" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<hr />


        </article>
      </div>
    </div>
  </div>
</div>


  

<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-offset-3 col-lg-6">
        <div class="row">
          <div class="col-xs-12 text-center">
            <small>&copy; rifyll theme, 2014</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
  <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script> -->
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>

  <!--<script src="/assets/js/prism.js"></script> -->
  <script src="/assets/js/site.js"></script>
</body>

</html>
