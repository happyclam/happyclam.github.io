<!DOCTYPE html>
<html lang="ja">
  <head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">
  <meta name="author" content="happyclam">
  <meta name="description"
    content="自己対戦でも強くなるのか？ 三目並べの初手最善手は真ん中ではない？ Reinventing the wheel.">
  <title> 自己対戦でも強くなるのか？ - 自己満足プログラミング </title>

  <!-- <\!-- Global Site Tag (gtag.js) - Google Analytics -\-> -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1752720-7"></script> -->
  <!-- <script> -->
  <!--   window.dataLayer = window.dataLayer || []; -->
  <!--   function gtag(){dataLayer.push(arguments);} -->
  <!--   gtag('js', new Date()); -->
  <!--   gtag('config', 'UA-1752720-7'); -->
  <!-- </script> -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEV3LMTH6C"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DEV3LMTH6C');
</script>

  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@SappierBoy">
  <meta name="twitter:creator" content="@SappierBoy">
  
  <meta name="twitter:title" content="自己対戦でも強くなるのか？">
  
  
  <meta name="twitter:url" content="/software/2019-07-19/self-play">
  
  
  <meta name="twitter:description" content="自己対戦で強くなるならそれに越したことはない。教師データを作るより楽。">
  
  
  <meta name="twitter:image:src" content="https://happyclam.github.io/images/logo_114.png">
  

  <link rel="canonical" href="https://happyclam.github.io/software/2019-07-19/self-play" />
  <link rel="alternate" type="application/rss+xml" title="自己満足プログラミング" href="/feed.xml" />
  <!-- stylesheets -->
  <link media="all" href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
  <link media="all" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link media="all" rel="stylesheet" href="/assets/css/site.css">

</head>


<body>
  <header>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="site-title" class="navbar-brand" href="/">
          <img class="pull-left img-responsive" src="">
          <span class="name-holder">自己満足プログラミング</span>
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbar">

        <ul id="main-menu" class="nav navbar-nav navbar-right">

          
            <li><a href="/">
              <i class="fa fa-home"></i> Home</a>
            </li>
          
            <li><a href="/categories/">
              <i class="fa fa-sitemap"></i> Categories</a>
            </li>
          
            <li><a href="/tags/">
              <i class="fa fa-tag"></i> Tags</a>
            </li>
          
            <li><a href="/about/">
              <i class="fa fa-info-circle"></i> About</a>
            </li>
          
            <li><a href="/policy/">
              <i class="fa fa-check"></i> Policy</a>
            </li>
          

        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
</header>

  <!-- <script src="https://unpkg.com/simple-jekyll-search@1.5.0/dest/simple-jekyll-search.min.js"></script> -->
  <script src="/assets/js/simple-jekyll-search.min.js"></script>
<!--   <div style="text-align: center;">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1238485061299241"
     crossorigin="anonymous"></script>
  </div>
 -->  <div class="blog-header">
    <div class="row-fluid">
      <div class="span3">
        <a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="SappierBoy">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </div>
      <div class="span9">
        <!-- Html Elements for Search -->
        <div id="search-container" align="right">
          <input type="text" id="search-input" placeholder="search...">
          <ul class="searchresult" id="results-container"></ul>
        </div>
        <div class="results"></div>
      </div>
    </div>
<script type="text/javascript">
  SimpleJekyllSearch.init({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{category}:{title}">{title}</a></li>',
    noResultsText: 'No results found',
    limit: 15,
    fuzzy: false,
  })
</script>
  <script src="/assets/js/jquery.min.js"></script>
  </div>
  <div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-offset-1 col-md-10 col-lg-offset-2 col-lg-8">
      <div class="page">

        <header class="page-header">
          <h2 class="page-title"><a href="/software/2019-07-19/self-play">自己対戦でも強くなるのか？</a></h2>
          <div class="post-metadata">
            <div> <i class="fa fa-calendar"></i>
              <time>
                Friday, July 19, 2019
              </time>
            </div>
            <div> <i class="fa fa-tag"></i>
                
                  <span class="label label-tag">coffeescript</span>
                
                  <span class="label label-tag">tictactoe</span>
                
                  <span class="label label-tag">android</span>
                
                  <span class="label label-tag">javascript</span>
                
                  <span class="label label-tag">ruby</span>
                
            </div>
          </div>

        </header>

        <article class="page-content">
          <script src="/assets/js/jquery.flot.min.js"></script>

<script src="/assets/js/flotr2.min.js" type="text/javascript"></script>

<script src="/assets/js/jquery.flot.selection.js" type="text/javascript"></script>

<h3 id="自己対戦でも強くなるはずなって欲しい">自己対戦でも強くなるはず、なって欲しい…</h3>
<p>　以前<a href="https://hb.afl.rakuten.co.jp/hgc/18980d66.5ec24871.18980d67.e8ecef93/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fbook%2F5271872%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Fbook%2Fi%2F12693001%2F&amp;link_type=text&amp;ut=eyJwYWdlIjoiaXRlbSIsInR5cGUiOiJ0ZXh0Iiwic2l6ZSI6IjI0MHgyNDAiLCJuYW0iOjEsIm5hbXAiOiJyaWdodCIsImNvbSI6MSwiY29tcCI6ImxlZnQiLCJwcmljZSI6MCwiYm9yIjoxLCJjb2wiOjAsImJidG4iOjF9">「統計の基本と世界を測るテクニック」</a>という本に書かれていた方法（加減算を使った強化学習）で作った三目並べプログラムを<a href="https://hb.afl.rakuten.co.jp/hgc/19032b03.6c2d03ea.19032b04.c502cee5/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fdorama%2Fn33498857%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Fdorama%2Fi%2F12771022%2F&amp;link_type=text&amp;ut=eyJwYWdlIjoiaXRlbSIsInR5cGUiOiJ0ZXh0Iiwic2l6ZSI6IjI0MHgyNDAiLCJuYW0iOjEsIm5hbXAiOiJyaWdodCIsImNvbSI6MSwiY29tcCI6ImRvd24iLCJwcmljZSI6MSwiYm9yIjoxLCJjb2wiOjEsImJidG4iOjF9">「ゼロから作るDeep-Learning-Pythonで学ぶディープラーニングの理論と実装」</a>に書かれていた方法（勾配法を使った誤差修正）に置き換えて比較した<a href="/project/2017-07-07/neuralnw2">記事</a>を書きましたが、この時は学習部分を書き換えただけで、学習データから指し手を決める部分（推論部分）は両方同じものを使いました。そして、MIN-MAX法（+αβ法）で作成した最強の三目並べプログラム（絶対負けない）にほぼ100%引き分けるようになるという学習効果が出たので良しとしました。今回は、自己対戦での学習です。<br />
　同じプログラムで自己対戦を進めてみると、学習の経過を観察している限りはうまくいっているように見えるのですが、ある程度進んだところからお互いに示し合わせたような手順で引き分けに持ち込むようになり、学習が進まなくなりました。何が不足していたのか書いていきます。</p>

<h3 id="学習データを使って指し手を決める部分">学習データを使って指し手を決める部分</h3>
<p>　<a href="/project/2017-07-07/neuralnw2">以前の記事</a>はRubyで試したのですが、<a href="https://play.google.com/store/apps/details?id=io.github.happyclam">進化する三目並べ（Tic-tac-toe Evo）アプリ</a>も同じコードです。アプリの方でやっている、指し手を決める部分（学習データの重みを元に確率的に指し手を決める推論部分）のコードは以下のようになっています。</p>

<pre><code class="language-CoffeeScript">    idx=(score) -&gt;
        ret = null
        index = ((Math.random() * score.reduce (t, s) -&gt; t + s) * 10) / 10.0
        start = 0
        for v, i in score
            continue unless v
            start += v
            if start &gt; index
                ret = i
                break
        return ret
</code></pre>

<p>　<code class="language-plaintext highlighter-rouge">[94, 32, 137, 98, 160, 95, 98, 84, 97]</code>のように格納されている学習データ（score配列）の合計値を最大とした乱数を生成して、配列要素の値の確率で指し手を選択します。この配列の場合、三目並べの９マスの中の真ん中の部分（=<code class="language-plaintext highlighter-rouge">160</code>）が一番選ばれる確率が高くなります。要素の値が大きなものほど選ばれる確率が高くなるようにしていて、このアルゴリズムには<code class="language-plaintext highlighter-rouge">ルーレット選択（roulette wheel selection）</code>という名前もついているそうです。<br />
　一方、勾配法を使って誤差修正した学習データ（重みデータ）の方は、こんな感じ（<code class="language-plaintext highlighter-rouge">[0.4318351809286462, -0.136178370499291, -0.09351127010637855, 0.1634164478516657, 0.24849662017899993, 0.6657091635199834, -0.0935112701066006, -0.05211347023271268, -0.13414303387244214]</code>）になっていて合計が１になるように正規化されています。合計が１になるのだから上のコードの配列の値を合計している部分（<code class="language-plaintext highlighter-rouge">score.reduce (t, s) -&gt; t + s</code>）は不要なので取り去ったのですが、自己対戦で学習させる場合はここに問題がありそうです。重みデータに負数が含まれていますので、上のコードだと負数の場所が選ばれることはありません。選ばれることがなかったとしても、それが学習の結果だからいいと思っていたのですが、自己対戦で学習を進める場合は選ばれることがない手が多いと学習する機会がありません。</p>

<h3 id="アプリに自己対戦機能をつけてみると">アプリに自己対戦機能をつけてみると</h3>
<p>　<a href="https://play.google.com/store/apps/details?id=io.github.happyclam">このアプリ（Tic-tac-toe Evo）</a>はCoffeeScript1.xxで作成していたのですが、CoffeeScript2で仕様が変わって今までのコードがトランスパイル出来なくなって放置していたのです<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>が、久しぶりに更新しようとして、ついでに自己対戦機能もつけてみてテストしたところ前述の問題に気づきました。<br />
　自己対戦させてみると、５００回程度の対戦で学習が進まなくなる（手順の変化がほとんどなくなる）のです。<a href="/project/2017-07-07/neuralnw2">以前の記事</a>にも書いたように、MIN-MAX法（+αβ法）で作成した最強の三目並べプログラムと対戦させた時はだいたい6,000回ぐらいの対戦が必要でしたのでおかしいと気付きました。自分で対戦してみても確かに弱いです。ＡＩが<strong>自己対戦で</strong>学習する場合、指し手を選択する部分にランダム性（無作為性）がなくなると、ゲーム木内で学習が進まないノードが多くなるからです。<br />
　そこで指し手を決める部分を以下のように修正しました。</p>

<pre><code class="language-CoffeeScript">    normal=(score) -&gt;
        min = score.reduce (t,s) -&gt; if (t &lt; s &amp;&amp; t?) then t else s
        max = score.reduce (t,s) -&gt; if (t &gt; s &amp;&amp; t?) then t else s
        if min &lt; 0
            return score.map (o) -&gt; if o? then (o - min) / (max - min) else null
        else
            return score

    idx=(score) -&gt;
        ret = null
        dest = normal.call @, score
        sum = dest.reduce (t, s) -&gt; t + s
        index = Math.random() * sum
        start = 0
        for v, i in dest
            continue unless v
            start += v
            if start &gt; index
                ret = i
                break
        return ret
</code></pre>

<p>　学習データに負数が含まれている場合は０〜１の正の値に正規化し直して、指し手をルーレット選択で決めます。こうすれば学習データ生成部分（勾配法で重みを修正していく部分）を弄らなくて済みます。<br />
　<strong>念のために書いておきますが<a href="https://play.google.com/store/apps/details?id=io.github.happyclam">現在リリースしているアプリ</a>は勾配法を使っていない（加減算による重み修正）ので、重みが負数になることがないため問題はありません。リニューアルする前に気がついてよかったです。</strong></p>

<h3 id="修正したコードで学習">修正したコードで学習</h3>
<p>　指し手を決める部分を修正した後に自己対戦で学習を進めたところ以下のグラフのような推移になりました。学習が進めば引き分けが多くなっていくはずですが、ＡＩ同士の対戦なので勝った方が正しい手を選択したとか負けた方が間違ってるとは言えませんので、このグラフだと学習が進んでいるのかどうかよく分かりません。</p>

<h4 id="グラフ１">グラフ１</h4>
<div class="graph-wrap">
    <div id="self_play" style="width:600px;height:300px;"></div>
</div>

<p>　最強プログラムと対戦させると以下のようになりました。学習の進み具合に関しては、<a href="/project/2017-07-07/neuralnw2">以前の記事</a>で紹介した最強プログラムとの対戦結果より結果が悪くなっています（当たり前？）。<a href="/project/2017-07-07/neuralnw2">以前の記事</a>で紹介した最強プログラムとの対戦経過のグラフは6,000回以上対戦した後はほぼ負けなくなりましたが、今回（以下のグラフ）はそれ以降も結構指し手を間違えて負けてます。重みデータが負数であっても選択されるようになったからです。</p>
<h4 id="グラフ２">グラフ２</h4>
<div class="graph-wrap">
    <div id="self_saikyo" style="width:600px;height:300px;"></div>
</div>

<h3 id="試しに">試しに</h3>
<p>　新しいアプリではＡＩ対ＡＩの<strong>自己対戦時だけ</strong>学習フェーズと看做して修正後の指し手選択機能（<code class="language-plaintext highlighter-rouge">正の値に再正規化してルーレット選択</code>）を使い、人との対戦時には修正前の方法（<code class="language-plaintext highlighter-rouge">学習データからそのままルーレット選択</code>）で指し手を決めるようにしようかと思い、自己対戦で10,000回対戦（学習）させて(=グラフ１と同じことをやって)、その学習データを使ってMIN-MAX法（+αβ法）で作成した最強の三目並べプログラムと対戦させた結果が以下のグラフです。</p>

<h4 id="グラフ３">グラフ３</h4>
<div class="graph-wrap">
    <div id="saikyo_after_self" style="width:600px;height:300px;"></div>
</div>

<p>　最強プログラムと対戦しながら、学習データの更新もしてます。約1,000回対戦後ぐらいから最強プログラムに対応して１００％間違えずに引き分けに持ち込んでいます<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup>。</p>

<h3 id="結局">結局</h3>
<p>　でも、<a href="https://play.google.com/store/apps/details?id=io.github.happyclam">現在のアプリ（Tic-tac-toe Evo）</a>は「ピロリ菌から人間」に進化するのが目的だったんですけど、重みの変化も表示出来るようにしてリニューアルするつもりなので、一度学習した重みが人と対戦する時だけ全く修正されなくなる（負数の重みの箇所は選択されない）のはおかしいので、結局リニューアル版アプリでは人と対戦する場合でも、修正後の指し手選択機能（<code class="language-plaintext highlighter-rouge">正の値に再正規化してルーレット選択</code>）を使うことにしました<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup>。</p>

<div class="graph-wrap">
    <div id="saikyo_after_self2" style="width:600px;height:300px;"></div>
</div>

<p>　学習率（0.03）をもっと上げればもう少し学習速度が上がることを確認していますが、<a href="/project/2017-07-07/neuralnw2">前回の記事</a>との比較のために同じ値にしています。</p>

<h3 id="一つの疑問">一つの疑問</h3>
<p>　ＡＩの<strong>自己対戦で</strong>学習させた後の初期盤面のデータを見ると、このようになっていて<br />
<code class="language-plaintext highlighter-rouge">[-1.8925330868577688, 1.8008319403253112, -1.897081206496631, 1.8408789986060665, 1.7986873436156023, 1.6117949761265158, -1.869006677797431, 1.5211261154141682, -1.914698484728805]</code><br />
　９マスの真ん中の値が一番大きな値にはなっていません。何回か試しましたが毎回こんな感じです。最強プログラムと対戦させると初手は真ん中が最善手だと学習するのですが、自己対戦だとそうならなくて良いのでしょうか？<br />
　以下のように二手目の局面に関しては全て真ん中の重みが一番大きな値になっています。</p>

<pre><code class="language-Ruby"># verify.rbの出力

 |X|2|3|
 |4|5|6|
 |7|8|9|
[nil, -0.6426669303657259, -0.6367678042990683, -0.6383926721743185, 5.4310677151704265, -0.6327334824829767, -0.6424836060305146, -0.616752627068463, -0.6212705675723019]
       
 |1|X|3|
 |4|5|6|
 |7|8|9|
[-0.16631190866539602, nil, 1.538412046081448, -0.7372359877317052, 3.3482333802093187, -0.7691023601009714, -0.7318887423947653, -0.7247859552613936, -0.7573204566228662]
       
 |1|2|X|
 |4|5|6|
 |7|8|9|
[nil, -0.6426669303657259, -0.6367678042990683, -0.6383926721743185, 5.4310677151704265, -0.6327334824829767, -0.6424836060305146, -0.616752627068463, -0.6212705675723019]
       
 |1|2|3|
 |X|5|6|
 |7|8|9|
[-0.16631190866539602, nil, 1.538412046081448, -0.7372359877317052, 3.3482333802093187, -0.7691023601009714, -0.7318887423947653, -0.7247859552613936, -0.7573204566228662]
       
 |1|2|3|
 |4|X|6|
 |7|8|9|
[0.5849222179777929, 0.010018189953422851, 0.12908711346909785, 0.004284212528851583, nil, 0.04368794916876073, 0.1295710912817576, 0.07700222026718873, 0.02142701999881247]
       
 |1|2|3|
 |4|5|X|
 |7|8|9|
[-0.16631190866539602, nil, 1.538412046081448, -0.7372359877317052, 3.3482333802093187, -0.7691023601009714, -0.7318887423947653, -0.7247859552613936, -0.7573204566228662]
       
 |1|2|3|
 |4|5|6|
 |X|8|9|
[nil, -0.6426669303657259, -0.6367678042990683, -0.6383926721743185, 5.4310677151704265, -0.6327334824829767, -0.6424836060305146, -0.616752627068463, -0.6212705675723019]
       
 |1|2|3|
 |4|5|6|
 |7|X|9|
[-0.16631190866539602, nil, 1.538412046081448, -0.7372359877317052, 3.3482333802093187, -0.7691023601009714, -0.7318887423947653, -0.7247859552613936, -0.7573204566228662]
       
 |1|2|3|
 |4|5|6|
 |7|8|X|
[nil, -0.6426669303657259, -0.6367678042990683, -0.6383926721743185, 5.4310677151704265, -0.6327334824829767, -0.6424836060305146, -0.616752627068463, -0.6212705675723019]
</code></pre>
<p>　二手目に関しては空いていれば必ず真ん中を選ぶのが最善だと学習したということです。<br />
　<a href="/software/2014-09-23/tictactoe_arrange">昔の記事</a>に書きましたが三目並べでは初手にどこを選んでも引き分けになります。先手・後手お互い最善手を選べば引き分けになるのですから、真ん中が最善手とは言えないという正しい結論を導いているように思えるのですが、一方で初手に真ん中を選ぶことはラインが揃う期待値がもっとも高い？と思っていたので、どう解釈すべきなのでしょうか。一般的に機械学習では最も期待値が高い手を選ぶようになるはずですが、三目並べの場合は規模が小さいので完全読み切りと同じ結論を得ることが出来たと言えるのかもしれません<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup>。<br />
　また、αβ法を使った三目並べプログラム（の指し手）という教師（データ）を使って学習するより、自己対戦で学習したデータの方が正しいという見方も出来そうです。プロ棋士の指し手を学習した将棋ＡＩより自己対戦で学んだAlphaZeroの方が強い状況と似ていますね<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup>。</p>

<h3 id="サンプルコード">サンプルコード</h3>
<p>　<a href="https://github.com/happyclam/tictactoe_ruby/tree/neural">公開しているRubyのコード（neural branch）</a>は、必要に応じて、必要な箇所をコメントにしたりアンコメントしたりしないといけない形になっていて分かりにくいと思いますが、興味があれば今回の作業を再現出来ます。</p>

<h3 id="将棋ａｉに適用すると">将棋ＡＩに適用すると</h3>
<p>　この<a href="https://play.google.com/store/apps/details?id=io.github.happyclam">三目並べアプリ</a>と全く同じ作り方で将棋ＡＩも出来そうな気もするのですが、三目並べのようにゲーム木内の全ノードを保持するわけにはいかないので、少なくとも新たな局面が現れる度に動的に局面データを生成していく必要がありそうです<sup id="fnref:6" role="doc-noteref"><a href="#fn:6" class="footnote" rel="footnote">6</a></sup>。それでも膨大なリソースが必要になりそうなので、とりあえず本将棋ではなく５五将棋で、尚且つ三目並べのようにゲーム終局を確認してから報酬か罰を与える（ロールアウト、プレイアウト）のではなく、ある程度優劣がはっきりしたところで打ち切って評価する形にすれば可能かもしれないと考えています。AlphaZeroもそんな感じ？で作られているようです（<a href="http://blog.brainpad.co.jp/entry/2018/04/05/163000">「強化学習入門 Part3 － AlphaGoZeroでも重要な技術要素！ モンテカルロ木探索の入門 －」</a>）。<br />
　自己対戦で強くなるのであれば、優秀な教師データを作ることに注力するより開発効率は良さそうです。</p>

<script type="text/javascript">
function show_self_play(){
    var old_lose = [[1, 35],[2, 41],[3, 40],[4, 43],[5, 32],[6, 38],[7, 42],[8, 41],[9, 48],[10, 52],[11, 45],[12, 46],[13, 46],[14, 50],[15, 37],[16, 46],[17, 48],[18, 46],[19, 42],[20, 43],[21, 51],[22, 43],[23, 46],[24, 46],[25, 42],[26, 38],[27, 40],[28, 24],[29, 32],[30, 38],[31, 37],[32, 31],[33, 23],[34, 25],[35, 34],[36, 22],[37, 28],[38, 26],[39, 36],[40, 29],[41, 29],[42, 31],[43, 32],[44, 29],[45, 30],[46, 30],[47, 28],[48, 35],[49, 25],[50, 34],[51, 30],[52, 17],[53, 24],[54, 37],[55, 26],[56, 26],[57, 23],[58, 22],[59, 30],[60, 28],[61, 33],[62, 26],[63, 33],[64, 32],[65, 31],[66, 30],[67, 30],[68, 37],[69, 19],[70, 28],[71, 22],[72, 34],[73, 19],[74, 33],[75, 26],[76, 25],[77, 26],[78, 26],[79, 29],[80, 29],[81, 29],[82, 39],[83, 29],[84, 26],[85, 31],[86, 31],[87, 37],[88, 28],[89, 23],[90, 21],[91, 27],[92, 23],[93, 25],[94, 26],[95, 34],[96, 22],[97, 17],[98, 30],[99, 31],[100, 26]];
    var old_win = [[1, 50],[2, 38],[3, 47],[4, 47],[5, 52],[6, 40],[7, 49],[8, 42],[9, 38],[10, 39],[11, 42],[12, 47],[13, 45],[14, 35],[15, 54],[16, 45],[17, 44],[18, 42],[19, 44],[20, 49],[21, 35],[22, 42],[23, 35],[24, 34],[25, 39],[26, 38],[27, 39],[28, 48],[29, 35],[30, 41],[31, 33],[32, 43],[33, 35],[34, 41],[35, 33],[36, 41],[37, 33],[38, 33],[39, 29],[40, 30],[41, 35],[42, 26],[43, 31],[44, 31],[45, 27],[46, 32],[47, 33],[48, 27],[49, 32],[50, 28],[51, 32],[52, 42],[53, 35],[54, 25],[55, 41],[56, 31],[57, 28],[58, 30],[59, 33],[60, 26],[61, 30],[62, 33],[63, 29],[64, 30],[65, 30],[66, 24],[67, 27],[68, 24],[69, 29],[70, 28],[71, 39],[72, 22],[73, 32],[74, 22],[75, 28],[76, 24],[77, 32],[78, 29],[79, 21],[80, 25],[81, 27],[82, 20],[83, 25],[84, 38],[85, 29],[86, 19],[87, 27],[88, 27],[89, 29],[90, 29],[91, 28],[92, 25],[93, 24],[94, 18],[95, 23],[96, 30],[97, 28],[98, 23],[99, 26],[100, 22]];
    var old_draw = [[1 ,15],[2 ,21],[3 ,13],[4 ,10],[5 ,16],[6 ,22],[7 ,9],[8 ,17],[9 ,14],[10 ,9],[11 ,13],[12, 7],[13, 9],[14, 15],[15, 9],[16, 9],[17, 8],[18, 12],[19, 14],[20, 8],[21, 14],[22, 15],[23, 19],[24 ,20],[25, 19],[26 ,24],[27 ,21],[28, 28],[29, 33],[30, 21],[31, 30],[32, 26],[33, 47],[34, 34],[35, 33],[36, 37],[37, 39],[38, 41],[39, 35],[40, 41],[41, 36],[42, 43],[43, 37],[44, 40],[45, 43],[46, 38],[47, 39],[48, 38],[49, 43],[50, 38],[51, 38],[52, 41],[53, 41],[54, 38],[55, 33],[56, 43],[57, 49],[58, 48],[59, 37],[60, 46],[61, 37],[62, 41],[63, 38],[64, 38],[65, 39],[66 , 46],[67, 43],[68, 39],[69, 52],[70, 44],[71, 39],[72, 44],[73, 49],[74, 45],[75, 46],[76, 51],[77, 44],[78, 45],[79, 50],[80, 46],[81, 44],[82, 41],[83, 46],[84, 36],[85, 40],[86, 50],[87, 36],[88, 45],[89, 48],[90, 50],[91, 45],[92, 52],[93, 51],[94, 56],[95, 43],[96, 48],[97, 55],[98, 47],[99, 43],[100, 52]];

    Flotr.draw(
        document.getElementById("self_play"),
        [
            {data: old_lose, label: "勝ち"},
            {data: old_win, label: "負け"},
            {data: old_draw, label: "引分"}
        ],
        {
            title: "推論部分修正後、自己対戦",
            subtitle: "自己対戦",
            HtmlText: false,
            bars:{show: true, stacked: true, horizontal:false},
            xaxis:{
                title: "対戦回数（×１００）",
                max: 110,
                noTicks: 10
            },
            yaxis:{
                title: "対戦結果（勝ち／負け／引き分け）",
                titleAngle: 90,
                max: 100,
                noTicks: 10
            },
            grid: {
                verticalLines: true,
                horizontalLines: true,
                outline: "ws"
            },
            mouse: {
                track:true,
                trackDecimals: 0
            }
        }
    );
}

function show_self_saikyo(){
    var old_lose = [];
    var old_win = [[1, 87],[2, 79],[3, 83],[4, 81],[5, 71],[6, 76],[7, 61],[8, 62],[9, 52],[10, 55],[11, 54],[12, 51],[13, 49],[14, 58],[15, 51],[16, 58],[17, 62],[18, 51],[19, 51],[20, 50],[21, 52],[22, 55],[23, 54],[24, 56],[25, 46],[26, 52],[27, 48],[28, 52],[29, 53],[30, 40],[31, 42],[32, 44],[33, 41],[34, 46],[35, 44],[36, 47],[37, 39],[38, 33],[39, 33],[40, 30],[41, 24],[42, 17],[43, 22],[44, 19],[45, 21],[46, 14],[47, 11],[48, 16],[49, 19],[50, 14],[51, 14],[52, 14],[53, 16],[54, 15],[55, 14],[56, 12],[57, 15],[58, 12],[59, 4],[60, 10],[61, 8],[62, 9],[63, 10],[64, 11],[65, 8],[66, 12],[67, 10],[68, 9],[69, 7],[70, 7],[71, 10],[72, 11],[73, 7],[74, 12],[75, 8],[76, 9],[77, 13],[78, 8],[79, 8],[80, 13],[81, 8],[82, 12],[83, 6],[84, 13],[85, 9],[86, 6],[87, 6],[88, 10],[89, 6],[90, 9],[91, 5],[92, 9],[93, 9],[94, 8],[95, 10],[96, 6],[97, 8],[98, 9],[99, 10],[100, 11]];
    var old_draw = [[1 ,13],[2 ,21],[3 ,17],[4 ,19],[5 ,29],[6 ,24],[7 ,39],[8 ,38],[9 ,48],[10 ,45],[11 ,46],[12 ,49],[13 ,51],[14 ,42],[15 ,49],[16 ,42],[17 ,38],[18 ,49],[19 ,49],[20 ,50],[21 ,48],[22 ,45],[23 ,46],[24 ,44],[25 ,54],[26 ,48],[27 ,52],[28 ,48],[29 ,47],[30 ,60],[31 ,58],[32 ,56],[33 ,59],[34 ,54],[35 ,56],[36 ,53],[37 ,61],[38 ,67],[39 ,67],[40 ,70],[41 ,76],[42 ,83],[43 ,78],[44 ,81],[45 ,79],[46 ,86],[47 ,89],[48 ,84],[49 ,81],[50 ,86],[51 ,86],[52 ,86],[53 ,84],[54 ,85],[55 ,86],[56 ,88],[57 ,85],[58 ,88],[59 ,96],[60 ,90],[61 , 92],[62 ,91],[63 ,90],[64 , 89],[65 ,92],[66 , 88],[67 , 90],[68 , 91],[69 , 93],[70 , 93],[71 , 90],[72 , 89],[73 , 93],[74 , 88],[75 , 92],[76 , 91],[77 , 87],[78 , 92],[79 , 92],[80 , 87],[81 , 92],[82 , 88],[83 , 94],[84 , 87],[85 , 91],[86 , 94],[87 , 94],[88 , 90],[89 , 94],[90 , 91],[91 , 95],[92 , 91],[93 , 91],[94 , 92],[95 , 90],[96 , 94],[97 , 92],[98 , 91],[99 , 90],[100 , 89]];

    Flotr.draw(
        document.getElementById("self_saikyo"),
        [
            {data: old_lose, label: "勝ち"},
            {data: old_win, label: "負け"},
            {data: old_draw, label: "引分"}
        ],
        {
            title: "推論部分修正後、最強プログラムと対戦",
            subtitle: "対最強プログラム",
            HtmlText: false,
            bars:{show: true, stacked: true, horizontal:false},
            xaxis:{
                title: "対戦回数（×１００）",
                max: 110,
                noTicks: 10
            },
            yaxis:{
                title: "対戦結果（勝ち／負け／引き分け）",
                titleAngle: 90,
                max: 100,
                noTicks: 10
            },
            grid: {
                verticalLines: true,
                horizontalLines: true,
                outline: "ws"
            },
            mouse: {
                track:true,
                trackDecimals: 0
            }
        }
    );
}

function show_saikyo_after_self(){
    var old_lose = [[1, 0],[2, 0],[3, 0],[4, 0],[5, 0],[6, 0],[7, 0],[8, 0],[9, 0],[10, 0],[11, 0],[12, 0],[13, 0],[14, 0],[15, 0],[16, 0],[17, 0],[18, 0],[19, 0],[20, 0],[21, 0],[22, 0],[23, 0],[24, 0],[25, 0],[26, 0],[27, 0],[28, 0],[29, 0],[30, 0],[31, 0],[32, 0],[33, 0],[34, 0],[35, 0],[36, 0],[37, 0],[38, 0],[39, 0],[40, 0],[41, 0],[42, 0],[43, 0],[44, 0],[45, 0],[46, 0],[47, 0],[48, 0],[49, 0],[50, 0],[51, 0],[52, 0],[53, 0],[54, 0],[55, 0],[56, 0],[57, 0],[58, 0],[59, 0],[60, 0],[61, 0],[62, 0],[63, 0],[64, 0],[65, 0],[66, 0],[67, 0],[68, 0],[69, 0],[70, 0],[71, 0],[72, 0],[73, 0],[74, 0],[75, 0],[76, 0],[77, 0],[78, 0],[79, 0],[80, 0],[81, 0],[82, 0],[83, 0],[84, 0],[85, 0],[86, 0],[87, 0],[88, 0],[89, 0],[90, 0],[91, 0],[92, 0],[93, 0],[94, 0],[95, 0],[96, 0],[97, 0],[98, 0],[99, 0],[100, 0]];
    var old_win = [[1, 28],[2, 16],[3, 18],[4, 9],[5, 7],[6, 10],[7, 10],[8, 6],[9, 5],[10, 3],[11, 0],[12, 3],[13, 1],[14, 1],[15, 1],[16, 0],[17, 3],[18, 1],[19, 0],[20, 0],[21, 2],[22, 0],[23, 0],[24, 0],[25, 0],[26, 0],[27, 0],[28, 0],[29, 0],[30, 0],[31, 0],[32, 0],[33, 0],[34, 0],[35, 0],[36, 0],[37, 0],[38, 0],[39, 0],[40, 0],[41, 0],[42, 0],[43, 0],[44, 0],[45, 0],[46, 0],[47, 0],[48, 0],[49, 0],[50, 0],[51, 0],[52, 0],[53, 0],[54, 0],[55, 0],[56, 0],[57, 0],[58, 0],[59, 0],[60, 0],[61, 0],[62, 0],[63, 0],[64, 0],[65, 0],[66, 0],[67, 0],[68, 0],[69, 0],[70, 0],[71, 0],[72, 0],[73, 0],[74, 0],[75, 0],[76, 0],[77, 0],[78, 0],[79, 0],[80, 0],[81, 0],[82, 0],[83, 0],[84, 0],[85, 0],[86, 0],[87, 0],[88, 0],[89, 0],[90, 0],[91, 0],[92, 0],[93, 0],[94, 0],[95, 0],[96, 0],[97, 0],[98, 0],[99, 0],[100, 0]];
    var old_draw = [[1, 72],[2, 84],[3, 82],[4, 91],[5, 93],[6, 90],[7, 90],[8, 94],[9, 95],[10, 97],[11, 100],[12, 97],[13, 99],[14, 99],[15, 99],[16, 100],[17, 97],[18, 99],[19, 100],[20, 100],[21, 98],[22, 100],[23, 100],[24, 100],[25, 100],[26, 100],[27, 100],[28, 100],[29, 100],[30, 100],[31, 100],[32, 100],[33, 100],[34, 100],[35, 100],[36, 100],[37, 100],[38, 100],[39, 100],[40, 100],[41, 100],[42, 100],[43, 100],[44, 100],[45, 100],[46, 100],[47, 100],[48, 100],[49, 100],[50, 100],[51, 100],[52, 100],[53, 100],[54, 100],[55, 100],[56, 100],[57, 100],[58, 100],[59, 100],[60, 100],[61, 100],[62, 100],[63, 100],[64, 100],[65, 100],[66, 100],[67, 100],[68, 100],[69, 100],[70, 100],[71, 100],[72, 100],[73, 100],[74, 100],[75, 100],[76, 100],[77, 100],[78, 100],[79, 100],[80, 100],[81, 100],[82, 100],[83, 100],[84, 100],[85, 100],[86, 100],[87, 100],[88, 100],[89, 100],[90, 100],[91, 100],[92, 100],[93, 100],[94, 100],[95, 100],[96, 100],[97, 100],[98, 100],[99, 100],[100,100]];
    //var old_lose = [[1, 0],[2, 0],[3, 0],[4, 0],[5, 0],[6, 0],[7, 0],[8, 0],[9, 0],[10, 0],[11, 0],[12, 0],[13, 0],[14, 0],[15, 0],[16, 0],[17, 0],[18, 0],[19, 0],[20, 0],[21, 0],[22, 0],[23, 0],[24, 0],[25, 0],[26, 0],[27, 0],[28, 0],[29, 0],[30, 0],[31, 0],[32, 0],[33, 0],[34, 0],[35, 0],[36, 0],[37, 0],[38, 0],[39, 0],[40, 0],[41, 0],[42, 0],[43, 0],[44, 0],[45, 0],[46, 0],[47, 0],[48, 0],[49, 0],[50, 0],[51, 0],[52, 0],[53, 0],[54, 0],[55, 0],[56, 0],[57, 0],[58, 0],[59, 0],[60, 0],[61, 0],[62, 0],[63, 0],[64, 0],[65, 0],[66, 0],[67, 0],[68, 0],[69, 0],[70, 0],[71, 0],[72, 0],[73, 0],[74, 0],[75, 0],[76, 0],[77, 0],[78, 0],[79, 0],[80, 0],[81, 0],[82, 0],[83, 0],[84, 0],[85, 0],[86, 0],[87, 0],[88, 0],[89, 0],[90, 0],[91, 0],[92, 0],[93, 0],[94, 0],[95, 0],[96, 0],[97, 0],[98, 0],[99, 0],[100, 0]];
    //var old_win = [[1, 19],[2, 17],[3, 23],[4, 15],[5, 22],[6, 16],[7, 11],[8, 13],[9, 10],[10, 7],[11, 11],[12, 9],[13, 3],[14, 9],[15, 3],[16, 8],[17, 3],[18, 3],[19, 6],[20, 5],[21, 3],[22, 11],[23, 3],[24, 3],[25, 4],[26, 5],[27, 4],[28, 2],[29, 4],[30, 4],[31, 5],[32, 3],[33, 5],[34, 2],[35, 5],[36, 6],[37, 1],[38, 4],[39, 4],[40, 4],[41, 1],[42, 4],[43, 3],[44, 6],[45, 1],[46, 1],[47, 5],[48, 2],[49, 1],[50, 2],[51, 4],[52, 1],[53, 1],[54, 2],[55, 2],[56, 2],[57, 0],[58, 0],[59, 2],[60, 0],[61, 4],[62, 2],[63, 1],[64, 0],[65, 0],[66, 2],[67, 0],[68, 3],[69, 0],[70, 0],[71, 0],[72, 0],[73, 0],[74, 0],[75, 0],[76, 1],[77, 1],[78, 1],[79, 1],[80, 0],[81, 1],[82, 0],[83, 2],[84, 2],[85, 1],[86, 1],[87, 0],[88, 0],[89, 2],[90, 1],[91, 0],[92, 0],[93, 0],[94, 1],[95, 0],[96, 1],[97, 0],[98, 1],[99, 0],[100, 0]];
    //var old_draw = [[1, 81],[2, 83],[3, 77],[4, 85],[5, 78],[6, 84],[7, 89],[8, 87],[9, 90],[10, 93],[11, 89],[12, 91],[13, 97],[14, 91],[15, 97],[16, 92],[17, 97],[18, 97],[19, 94],[20, 95],[21, 97],[22, 89],[23, 97],[24, 97],[25, 96],[26, 95],[27, 96],[28, 98],[29, 96],[30, 96],[31, 95],[32, 97],[33, 95],[34, 98],[35, 95],[36, 94],[37, 99],[38, 96],[39, 96],[40, 96],[41, 99],[42, 96],[43, 97],[44, 94],[45, 99],[46, 99],[47, 95],[48, 98],[49, 99],[50, 98],[51, 96],[52, 99],[53, 99],[54, 98],[55, 98],[56, 98],[57, 100],[58, 100],[59, 98],[60, 100],[61, 96],[62, 98],[63, 99],[64, 100],[65, 100],[66, 98],[67, 100],[68, 97],[69, 100],[70, 100],[71, 100],[72, 100],[73, 100],[74, 100],[75, 100],[76, 99],[77, 99],[78, 99],[79, 99],[80, 100],[81, 99],[82, 100],[83, 98],[84, 98],[85, 99],[86, 99],[87, 100],[88, 100],[89, 98],[90, 99],[91, 100],[92, 100],[93, 100],[94, 99],[95, 100],[96, 99],[97, 100],[98, 99],[99, 100],[100,100]];

    Flotr.draw(
        document.getElementById("saikyo_after_self"),
        [
            {data: old_lose, label: "勝ち"},
            {data: old_win, label: "負け"},
            {data: old_draw, label: "引分"}
        ],
        {
            title: "自己対戦で学習後、最強プログラムと対戦",
            subtitle: "自己対戦データ使用",
            HtmlText: false,
            bars:{show: true, stacked: true, horizontal:false},
            xaxis:{
                title: "対戦回数（×１００）",
                max: 110,
                noTicks: 10
            },
            yaxis:{
                title: "対戦結果（勝ち／負け／引き分け）",
                titleAngle: 90,
                max: 100,
                noTicks: 10
            },
            grid: {
                verticalLines: true,
                horizontalLines: true,
                outline: "ws"
            },
            mouse: {
                track:true,
                trackDecimals: 0
            }
        }
    );
}

function show_saikyo_after_self2(){
    var old_lose = [[1, 0],[2, 0],[3, 0],[4, 0],[5, 0],[6, 0],[7, 0],[8, 0],[9, 0],[10, 0],[11, 0],[12, 0],[13, 0],[14, 0],[15, 0],[16, 0],[17, 0],[18, 0],[19, 0],[20, 0],[21, 0],[22, 0],[23, 0],[24, 0],[25, 0],[26, 0],[27, 0],[28, 0],[29, 0],[30, 0],[31, 0],[32, 0],[33, 0],[34, 0],[35, 0],[36, 0],[37, 0],[38, 0],[39, 0],[40, 0],[41, 0],[42, 0],[43, 0],[44, 0],[45, 0],[46, 0],[47, 0],[48, 0],[49, 0],[50, 0],[51, 0],[52, 0],[53, 0],[54, 0],[55, 0],[56, 0],[57, 0],[58, 0],[59, 0],[60, 0],[61, 0],[62, 0],[63, 0],[64, 0],[65, 0],[66, 0],[67, 0],[68, 0],[69, 0],[70, 0],[71, 0],[72, 0],[73, 0],[74, 0],[75, 0],[76, 0],[77, 0],[78, 0],[79, 0],[80, 0],[81, 0],[82, 0],[83, 0],[84, 0],[85, 0],[86, 0],[87, 0],[88, 0],[89, 0],[90, 0],[91, 0],[92, 0],[93, 0],[94, 0],[95, 0],[96, 0],[97, 0],[98, 0],[99, 0],[100, 0]];
    var old_win = [[1, 36],[2, 39],[3, 36],[4, 24],[5, 25],[6, 31],[7, 25],[8, 23],[9, 25],[10, 20],[11, 22],[12, 25],[13, 26],[14, 18],[15, 18],[16, 18],[17, 24],[18, 21],[19, 17],[20, 15],[21, 17],[22, 12],[23, 14],[24, 16],[25, 9],[26, 14],[27, 5],[28, 16],[29, 7],[30, 17],[31, 10],[32, 10],[33, 10],[34, 5],[35, 8],[36, 13],[37, 3],[38, 11],[39, 10],[40, 10],[41, 8],[42, 5],[43, 7],[44, 9],[45, 13],[46, 7],[47, 5],[48, 5],[49, 9],[50, 6],[51, 3],[52, 7],[53, 7],[54, 2],[55, 9],[56, 6],[57, 6],[58, 3],[59, 5],[60, 5],[61, 4],[62, 7],[63, 1],[64, 6],[65, 2],[66, 4],[67, 7],[68, 4],[69, 3],[70, 0],[71, 2],[72, 3],[73, 2],[74, 1],[75, 0],[76, 3],[77, 2],[78, 3],[79, 6],[80, 2],[81, 3],[82, 5],[83, 3],[84, 4],[85, 4],[86, 4],[87, 2],[88, 1],[89, 4],[90, 6],[91, 3],[92, 3],[93, 2],[94, 4],[95, 2],[96, 8],[97, 6],[98, 0],[99, 0],[100, 2]];
    var old_draw = [[1, 64],[2, 61],[3, 64],[4, 76],[5, 75],[6, 69],[7, 75],[8, 77],[9, 75],[10, 80],[11, 78],[12, 75],[13, 74],[14, 82],[15, 82],[16, 82],[17, 76],[18, 79],[19, 83],[20, 85],[21, 83],[22, 88],[23, 86],[24, 84],[25, 91],[26, 86],[27, 95],[28, 84],[29, 93],[30, 83],[31, 90],[32, 90],[33, 90],[34, 95],[35, 92],[36, 87],[37, 97],[38, 89],[39, 90],[40, 90],[41, 92],[42, 95],[43, 93],[44, 91],[45, 87],[46, 93],[47, 95],[48, 95],[49, 91],[50, 94],[51, 97],[52, 93],[53, 93],[54, 98],[55, 91],[56, 94],[57, 94],[58, 97],[59, 95],[60, 95],[61, 96],[62, 93],[63, 99],[64, 94],[65, 98],[66, 96],[67, 93],[68, 96],[69, 97],[70, 100],[71, 98],[72, 97],[73, 98],[74, 99],[75, 100],[76, 97],[77, 98],[78, 97],[79, 94],[80, 98],[81, 97],[82, 95],[83, 97],[84, 96],[85, 96],[86, 96],[87, 98],[88, 99],[89, 96],[90, 94],[91, 97],[92, 97],[93, 98],[94, 96],[95, 98],[96, 92],[97, 94],[98, 100],[99, 100],[100,98]];

    Flotr.draw(
        document.getElementById("saikyo_after_self2"),
        [
            {data: old_lose, label: "勝ち"},
            {data: old_win, label: "負け"},
            {data: old_draw, label: "引分"}
        ],
        {
            title: "自己対戦で学習後、最強プログラムと対戦（再正規化後ルーレット選択）",
            subtitle: "自己対戦データ使用",
            HtmlText: false,
            bars:{show: true, stacked: true, horizontal:false},
            xaxis:{
                title: "対戦回数（×１００）",
                max: 110,
                noTicks: 10
            },
            yaxis:{
                title: "対戦結果（勝ち／負け／引き分け）",
                titleAngle: 90,
                max: 100,
                noTicks: 10
            },
            grid: {
                verticalLines: true,
                horizontalLines: true,
                outline: "ws"
            },
            mouse: {
                track:true,
                trackDecimals: 0
            }
        }
    );
}

function show_saikyo_after_saikyo(){
    var old_lose = [[1, 0],[2, 0],[3, 0],[4, 0],[5, 0],[6, 0],[7, 0],[8, 0],[9, 0],[10, 0],[11, 0],[12, 0],[13, 0],[14, 0],[15, 0],[16, 0],[17, 0],[18, 0],[19, 0],[20, 0],[21, 0],[22, 0],[23, 0],[24, 0],[25, 0],[26, 0],[27, 0],[28, 0],[29, 0],[30, 0],[31, 0],[32, 0],[33, 0],[34, 0],[35, 0],[36, 0],[37, 0],[38, 0],[39, 0],[40, 0],[41, 0],[42, 0],[43, 0],[44, 0],[45, 0],[46, 0],[47, 0],[48, 0],[49, 0],[50, 0],[51, 0],[52, 0],[53, 0],[54, 0],[55, 0],[56, 0],[57, 0],[58, 0],[59, 0],[60, 0],[61, 0],[62, 0],[63, 0],[64, 0],[65, 0],[66, 0],[67, 0],[68, 0],[69, 0],[70, 0],[71, 0],[72, 0],[73, 0],[74, 0],[75, 0],[76, 0],[77, 0],[78, 0],[79, 0],[80, 0],[81, 0],[82, 0],[83, 0],[84, 0],[85, 0],[86, 0],[87, 0],[88, 0],[89, 0],[90, 0],[91, 0],[92, 0],[93, 0],[94, 0],[95, 0],[96, 0],[97, 0],[98, 0],[99, 0],[100, 0]];
    var old_win = [[1, 3],[2, 0],[3, 6],[4, 8],[5, 4],[6, 2],[7, 3],[8, 3],[9, 0],[10, 3],[11, 4],[12, 3],[13, 4],[14, 3],[15, 5],[16, 5],[17, 4],[18, 1],[19, 6],[20, 6],[21, 5],[22, 5],[23, 4],[24, 1],[25, 6],[26, 3],[27, 4],[28, 3],[29, 5],[30, 4],[31, 3],[32, 2],[33, 6],[34, 2],[35, 4],[36, 1],[37, 0],[38, 3],[39, 5],[40, 6],[41, 3],[42, 1],[43, 2],[44, 7],[45, 5],[46, 2],[47, 4],[48, 5],[49, 8],[50, 1],[51, 5],[52, 5],[53, 7],[54, 4],[55, 2],[56, 5],[57, 8],[58, 1],[59, 7],[60, 5],[61, 1],[62, 5],[63, 6],[64, 1],[65, 6],[66, 6],[67, 2],[68, 4],[69, 5],[70, 6],[71, 7],[72, 1],[73, 4],[74, 4],[75, 6],[76, 4],[77, 6],[78, 5],[79, 3],[80, 7],[81, 5],[82, 3],[83, 8],[84, 4],[85, 1],[86, 6],[87, 1],[88, 2],[89, 2],[90, 3],[91, 2],[92, 3],[93, 4],[94, 1],[95, 3],[96, 7],[97, 2],[98, 2],[99, 7],[100, 6]];
    var old_draw = [[1 ,97],[2, 100],[3 ,94],[4, 92],[5, 96],[6 ,98],[7, 97],[8, 97],[9, 100],[10, 97],[11, 96],[12, 97],[13, 96],[14, 97],[15, 95],[16, 95],[17, 96],[18, 99],[19, 94],[20, 94],[21, 95],[22, 95],[23, 96],[24, 99],[25, 94],[26, 97],[27, 96],[28, 97],[29, 95],[30, 96],[31, 97],[32, 98],[33, 94],[34, 98],[35, 96],[36, 99],[37, 100],[38, 97],[39, 95],[40, 94],[41, 97],[42, 99],[43, 98],[44, 93],[45, 95],[46, 98],[47, 96],[48, 95],[49, 92],[50, 99],[51, 95],[52, 95],[53, 93],[54, 96],[55, 98],[56, 95],[57, 92],[58, 99],[59, 93],[60, 95],[61, 99],[62, 95],[63, 94],[64, 99],[65, 94],[66, 94],[67, 98],[68, 96],[69, 95],[70, 94],[71, 93],[72, 99],[73, 96],[74, 96],[75, 94],[76, 96],[77, 94],[78, 95],[79, 97],[80, 93],[81, 95],[82, 97],[83, 92],[84, 96],[85, 99],[86, 94],[87, 99],[88, 98],[89, 98],[90, 97],[91, 98],[92, 97],[93, 96],[94, 99],[95, 97],[96, 93],[97, 98],[98, 98],[99, 93],[100, 94]];

    Flotr.draw(
        document.getElementById("saikyo_after_saikyo"),
        [
            {data: old_lose, label: "勝ち"},
            {data: old_win, label: "負け"},
            {data: old_draw, label: "引分"}
        ],
        {
            title: "最強プログラムと対戦後、最強プログラムと再対戦",
            subtitle: "自己対戦データ使用",
            HtmlText: false,
            bars:{show: true, stacked: true, horizontal:false},
            xaxis:{
                title: "対戦回数（×１００）",
                max: 110,
                noTicks: 10
            },
            yaxis:{
                title: "対戦結果（勝ち／負け／引き分け）",
                titleAngle: 90,
                max: 100,
                noTicks: 10
            },
            grid: {
                verticalLines: true,
                horizontalLines: true,
                outline: "ws"
            },
            mouse: {
                track:true,
                trackDecimals: 0
            }
        }
    );
}

window.onload = function() {
    show_self_play();
    show_self_saikyo();
    show_saikyo_after_self();
    show_saikyo_after_self2();
    //show_saikyo_after_saikyo();
};
</script>

<hr />

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>CoffeeScriptはオブジェクト指向言語のように記述出来るのですが、クラスベースのオブジェクト指向言語になりきっていないJavaScriptにトランスパイルするには無理があるようで、Arrayクラスを継承した独自クラスを使っていた部分の振る舞いが、CoffeeScript2になって変わりました。その辺の技術的なことは別の記事に書くかもしれません。 <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p>何回か試してみると、1,000回目ぐらいから１００％にならずにずっと９９％ぐらいで推移することもあるのですが、１００％になる時との違いが何に起因するものかよく分かりません。 <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:3" role="doc-endnote">
      <p><a href="https://github.com/happyclam/tictactoe_ruby/tree/neural">公開しているRubyのコード（neural branch）</a>は先手か後手の一方でしか学習データを更新していませんが、実際のアプリではＡＩ同士の対戦時に先手・後手双方で学習データを更新しますので、このグラフよりかは学習効率は上がります。 <a href="#fnref:3" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:4" role="doc-endnote">
      <p>αβ法を使った最強三目並べプログラムとの対戦だけだと、たとえ同じ評価値の時に乱数で指し手を選択するようにしているとしてもランダム性が足りないのかもしれません。 <a href="#fnref:4" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:5" role="doc-endnote">
      <p>こういう書き方をするとＡＩ万能なＡＩ信者のように受け取られるかもしれませんが、個人的には将棋ＡＩは勝つことを目的にしているので勝ち易い手を選ぶ（入玉指向だったり、ポイントを積み重ねる将棋）だけで、本当の最善手は今のＡＩが選ぶのとは別の経路にあるかもしれない（短手数の必勝手順が存在するとか…）、もしそうなら面白いなぁなんて考えてます、相入玉か千日手が本命かなとも思いますが…。細かなポイントを積み重ねる柔道より一本を取る柔道の方が見ていて面白いので、間違いがあっても人間の将棋の方が楽しめます。ＡＩの指し手も年々変化するわけですから、ＡＩの手が最善手とは言えないのは確かでしょう。 <a href="#fnref:5" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:6" role="doc-endnote">
      <p><a href="https://play.google.com/store/apps/details?id=io.github.happyclam">三目並べアプリ</a>も昔のバージョンは動的にゲーム木を生成するやり方でした。 <a href="#fnref:6" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        </article>
      </div>
    </div>
  </div>
</div>


  

<footer class="footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-offset-3 col-lg-6">
        <div class="row">
          <div class="col-xs-12 text-center">
            <small>&copy; rifyll theme, 2014</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>


  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
  <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script> -->
  <script src="/assets/js/bootstrap.min.js"></script>

  <!--<script src="/assets/js/prism.js"></script> -->
  <script src="/assets/js/site.js"></script>
</body>

</html>
